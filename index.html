<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>IHA Code Generator</title>
    <style>
        /* Add your CSS styles here */
        .subb,
        .subb2,
        .subb3,
        .subb4,
        .subb5,
        .subb6,
        .subb7,
        .subb8 {
            margin-left: 1em; /* Adjust the value as needed */
            display: none; /* Hide the divs by default */
        }
        header h1 {
            margin-left: 1em; /* Adjust the value as needed */
            color: blue; /* Set the color to blue */
        }
        main h3 {
            margin-left: 0em; /* Adjust the value as needed */
            color: blue; /* Set the color to blue */
          }
        main h4 {
            color: red; /* Set the color to blue */     
          }
        main h5 {
            color: red; /* Set the color to blue */  
          }
        main h6 {
            color: red; /* Set the color to blue */ 
          }
        main h7 {
            color: black; /* Set the color to blue */                                              
          }        
        #downloadButton {
            margin-left: 2em; /* Adjust the value as needed */
            background-color: green; /* Set the background color to green */
            color: white; /* Set the text color to white */
            border: none; /* Remove border for a cleaner look */
            padding: 10px 20px; /* Add padding for better appearance */
            cursor: pointer; /* Add cursor pointer for user interaction */
        }
    </style>
</head>
</main>                                              
</div>    
<header>
  <h1>IHA Code Generator Beta  aaa</h1>
</header>
<pre></pre>
<main>
  <h4>ENTER YOUR OWN VALUES </h4>
</main>  
<div>
    <label for="textEntry1">ESPHome Name:</label>
    <input type="text" id="textEntry1" value="iha-rack-system">
</div>
<div>
    <label for="textEntry2">OTA Password:</label>
    <input type="text" id="textEntry2" value="Dm.376223">
</div>
<div>
    <label for="textEntry3">Web Portal Username:</label>
    <input type="text" id="textEntry3" value="admin">
</div>
<div>
    <label for="textEntry4">Web Portal Password:</label>
    <input type="text" id="textEntry4" value="password1234">
</div>
<div>
    <label for="textEntry5">Display Name:</label>
    <input type="text" id="textEntry5" value="IHA Rack System">
</div>
<div>
    <label for="textEntry6">API Key:</label>
    <input type="text" id="textEntry6" value="AS2li9nZ3SakmvEWO4QWJQVuAwCUAdO38RPUG7MUNmA=">
</div>
<pre></pre>     
<main>
  <h4>Options </h4>                       
<main>
  <label for="dropdown9">Logger:</label>
  <select id="dropdown9">
      <option value="Disabled">Disabled</option>
      <option value="Enabled">Enabled</option>
      <!-- Add more options for Node Device 2 as needed -->
  </select> 
  <main>
    <label for="dropdown13">OTA Password:</label>
    <select id="dropdown13">
        <option value="Disabled">Disabled</option>
        <option value="Enabled">Enabled</option>
        <!-- Add more options for Node Device 2 as needed -->
    </select>                                                                               
    <main>  
      <main>
        <label for="dropdown15">API Password:</label>
        <select id="dropdown15">
            <option value="Disabled">Disabled</option>
            <option value="Enabled">Enabled</option>
            <!-- Add more options for Node Device 2 as needed -->
        </select>                                                                               
        <main>              
  <main>
  <label for="dropdown10">Display:</label>
  <select id="dropdown10">
      <option value="Enabled">Enabled</option>
      <option value="Disabled">Disabled</option>
      <!-- Add more options for Node Device 2 as needed -->
  </select>    
  <main>
  <label for="dropdown11">Uptime Sensor:</label>
  <select id="dropdown11">
      <option value="Enabled">Enabled</option>
      <option value="Disabled">Disabled</option>
      <!-- Add more options for Node Device 2 as needed -->
  </select>  
  <main>
  <label for="dropdown12">Status RGB:</label>
  <select id="dropdown12">
      <option value="Enabled">Enabled</option>
      <option value="Disabled">Disabled</option>
      <!-- Add more options for Node Device 2 as needed -->
  </select>                                                                               
  <main>    
    <main>
      <label for="dropdown14">Web Server:</label>
      <select id="dropdown14">
          <option value="Enabled">Enabled</option>
          <option value="Disabled">Disabled</option>
          <!-- Add more options for Node Device 2 as needed -->
      </select>                                                                               
      <main>  
<pre></pre>
<button id="downloadButton">Download YAML File</button>
<main>
  <h3>IHA Projects </h3>
<main>
<main>
  <label for="dropdown16">Pick Project:</label>
  <select id="dropdown16">
    <option value="None">None</option>
    <option value="home_automation_system">Home Automation System</option>    
    <option value="ESP32 Blinds">ESP32 Blinds</option>
      <option value="Placeholder">Placeholder</option>
      <!-- Add more options for Node Device 2 as needed -->
  </select>                                                                               
  <main> 
<body>
   <div class="subb9">  
    <main>
      <h3>GPIO Rack System (Node Attached Devices) </h3>
    <main>
      <h4>Address Assigned on board </h4>  
        <label for="dropdown1">Device 1 Address:</label>
        <select id="dropdown1">
            <option value="none">None</option>
            <option value="0x20">0x20</option>
            <option value="0x21">0x21</option>
            <option value="0x22">0x22</option>
            <option value="0x23">0x23</option>
            <option value="0x24">0x24</option>
            <option value="0x25">0x25</option>
            <option value="0x26">0x26</option>
            <option value="0x27">0x27</option>
            <!-- Add more options for Node Device 1 as needed -->
        </select>
    </main>
    <div class="subb">
        <label for="type1">Device 1 Type:</label>
        <select id="type1">
            <option value="none">none</option>
            <option value="16 GPIO Rack Card 1">4 Port Rack Card 1</option>
            <option value="16 GPIO Rack Card 2">4 Port Rack Card 2</option>
            <option value="16 GPIO Rack Card 3">4 Port Rack Card 3</option>
            <option value="16 GPIO Rack Card 4">4 Port Rack Card 4</option>
            <option value="Button Controller">Button Controller</option>
            <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
            <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
            <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
            <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
            <!-- Add more options for Node Device Type 1 as needed -->
        </select>
    </div>
    <main>
        <label for="dropdown2">Device 2 Address:</label>
        <select id="dropdown2">
            <option value="none">None</option>
            <option value="0x20">0x20</option>
            <option value="0x21">0x21</option>
            <option value="0x22">0x22</option>
            <option value="0x23">0x23</option>
            <option value="0x24">0x24</option>
            <option value="0x25">0x25</option>
            <option value="0x26">0x26</option>
            <option value="0x27">0x27</option>
            <!-- Add more options for Node Device 2 as needed -->
        </select>
    </main>
    <div class="subb2">
        <label for="type2">Device 2 Type:</label>
        <select id="type2">
            <option value="none">none</option>
            <option value="16 GPIO Rack Card 1">4 Port Rack Card 1</option>
            <option value="16 GPIO Rack Card 2">4 Port Rack Card 2</option>
            <option value="16 GPIO Rack Card 3">4 Port Rack Card 3</option>
            <option value="16 GPIO Rack Card 4">4 Port Rack Card 4</option>
            <option value="Button Controller">Button Controller</option>
            <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
            <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
            <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
            <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
            <!-- Add more options for Node Device Type 2 as needed -->
        </select>
    </div>
    <main>
      <label for="dropdown3">Device 3 Address:</label>
      <select id="dropdown3">
          <option value="none">None</option>
          <option value="0x20">0x20</option>
          <option value="0x21">0x21</option>
          <option value="0x22">0x22</option>
          <option value="0x23">0x23</option>
          <option value="0x24">0x24</option>
          <option value="0x25">0x25</option>
          <option value="0x26">0x26</option>
          <option value="0x27">0x27</option>
          <!-- Add more options for Node Device 2 as needed -->
      </select>
    </main>
    <div class="subb3">
      <label for="type3">Device 3 Type:</label>
      <select id="type3">
          <option value="none">none</option>
          <option value="16 GPIO Rack Card 1">4 Port Rack Card 1</option>
          <option value="16 GPIO Rack Card 2">4 Port Rack Card 2</option>
          <option value="16 GPIO Rack Card 3">4 Port Rack Card 3</option>
          <option value="16 GPIO Rack Card 4">4 Port Rack Card 4</option>
          <option value="Button Controller">Button Controller</option>
          <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
          <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
          <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
          <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
          <!-- Add more options for Node Device Type 2 as needed -->
      </select>
    </div>      
    <main>
        <label for="dropdown4">Device 4 Address:</label>
        <select id="dropdown4">
            <option value="none">None</option>
            <option value="0x20">0x20</option>
            <option value="0x21">0x21</option>
            <option value="0x22">0x22</option>
            <option value="0x23">0x23</option>
            <option value="0x24">0x24</option>
            <option value="0x25">0x25</option>
            <option value="0x26">0x26</option>
            <option value="0x27">0x27</option>
            <!-- Add more options for Node Device 2 as needed -->
        </select>
    </main>
    <div class="subb4">
        <label for="type4">Device 4 Type:</label>
        <select id="type4">
            <option value="none">none</option>
            <option value="16 GPIO Rack Card 1">4 Port Rack Card 1</option>
            <option value="16 GPIO Rack Card 2">4 Port Rack Card 2</option>
            <option value="16 GPIO Rack Card 3">4 Port Rack Card 3</option>
            <option value="16 GPIO Rack Card 4">4 Port Rack Card 4</option>
            <option value="Button Controller">Button Controller</option>
            <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
            <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
            <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
            <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
            <!-- Add more options for Node Device Type 2 as needed -->
        </select> 
    </div>        
    <main>
          <label for="dropdown5">Device 5 Address:</label>
          <select id="dropdown5">
              <option value="none">None</option>
              <option value="0x20">0x20</option>
              <option value="0x21">0x21</option>
              <option value="0x22">0x22</option>
              <option value="0x23">0x23</option>
              <option value="0x24">0x24</option>
              <option value="0x25">0x25</option>
              <option value="0x26">0x26</option>
              <option value="0x27">0x27</option>
              <!-- Add more options for Node Device 2 as needed -->
          </select>
    </main>
    <div class="subb5">
          <label for="type5">Device 5 Type:</label>
          <select id="type5">
              <option value="none">none</option>
              <option value="16 GPIO Rack Card 1">4 Port Rack Card 1</option>
              <option value="16 GPIO Rack Card 2">4 Port Rack Card 2</option>
              <option value="16 GPIO Rack Card 3">4 Port Rack Card 3</option>
              <option value="16 GPIO Rack Card 4">4 Port Rack Card 4</option>
              <option value="Button Controller">Button Controller</option>
              <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
              <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
              <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
              <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
              <!-- Add more options for Node Device Type 2 as needed -->
          </select>  
    </div>        
    <main>
            <label for="dropdown6">Device 6 Address:</label>
            <select id="dropdown6">
                <option value="none">None</option>
                <option value="0x20">0x20</option>
                <option value="0x21">0x21</option>
                <option value="0x22">0x22</option>
                <option value="0x23">0x23</option>
                <option value="0x24">0x24</option>
                <option value="0x25">0x25</option>
                <option value="0x26">0x26</option>
                <option value="0x27">0x27</option>
                <!-- Add more options for Node Device 2 as needed -->
            </select>
     </main>
     <div class="subb6">
            <label for="type6">Device 6 Type:</label>
            <select id="type6">
                <option value="none">none</option>
                <option value="16 GPIO Rack Card 1">4 Port Rack Card 1</option>
                <option value="16 GPIO Rack Card 2">4 Port Rack Card 2</option>
                <option value="16 GPIO Rack Card 3">4 Port Rack Card 3</option>
                <option value="16 GPIO Rack Card 4">4 Port Rack Card 4</option>
                <option value="Button Controller">Button Controller</option>
                <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
                <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
                <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
                <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
                <!-- Add more options for Node Device Type 2 as needed -->
            </select>   
     </div>           
     <main>
              <label for="dropdown7">Device 7 Address:</label>
              <select id="dropdown7">
                  <option value="none">None</option>
                  <option value="0x20">0x20</option>
                  <option value="0x21">0x21</option>
                  <option value="0x22">0x22</option>
                  <option value="0x23">0x23</option>
                  <option value="0x24">0x24</option>
                  <option value="0x25">0x25</option>
                  <option value="0x26">0x26</option>
                  <option value="0x27">0x27</option>
                  <!-- Add more options for Node Device 2 as needed -->
              </select>
    </main>
    <div class="subb7">
              <label for="type7">Device 7 Type:</label>
              <select id="type7">
                  <option value="none">none</option>
                  <option value="16 GPIO Rack Card 1">4 Port Rack Card 1</option>
                  <option value="16 GPIO Rack Card 2">4 Port Rack Card 2</option>
                  <option value="16 GPIO Rack Card 3">4 Port Rack Card 3</option>
                  <option value="16 GPIO Rack Card 4">4 Port Rack Card 4</option>
                  <option value="Button Controller">Button Controller</option>
                  <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
                  <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
                  <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
                  <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
                  <!-- Add more options for Node Device Type 2 as needed -->
              </select>    
    </div>              
    <main>
                <label for="dropdown8">Device 8 Address:</label>
                <select id="dropdown8">
                    <option value="none">None</option>
                    <option value="0x20">0x20</option>
                    <option value="0x21">0x21</option>
                    <option value="0x22">0x22</option>
                    <option value="0x23">0x23</option>
                    <option value="0x24">0x24</option>
                    <option value="0x25">0x25</option>
                    <option value="0x26">0x26</option>
                    <option value="0x27">0x27</option>
                    <!-- Add more options for Node Device 2 as needed -->
                </select>
    </main>
    <div class="subb8">
                <label for="type8">Device 8 Type:</label>
                <select id="type8">
                    <option value="none">none</option>
                    <option value="16 GPIO Rack Card 1">4 Port Rack Card 1</option>
                    <option value="16 GPIO Rack Card 2">4 Port Rack Card 2</option>
                    <option value="16 GPIO Rack Card 3">4 Port Rack Card 3</option>
                    <option value="16 GPIO Rack Card 4">4 Port Rack Card 4</option>
                    <option value="Button Controller">Button Controller</option>
                    <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
                    <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
                    <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
                    <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
                    <!-- Add more options for Node Device Type 2 as needed -->
                </select>    
      </div>                                                                            
            <main>                                   


    <!-- Add your JavaScript code here if needed -->
    <script name="yamlmaker">
        const dropdown1 = document.getElementById('dropdown1');
        const dropdown2 = document.getElementById('dropdown2');
        const dropdown3 = document.getElementById('dropdown3');
        const dropdown4 = document.getElementById('dropdown4');  
        const dropdown5 = document.getElementById('dropdown5');
        const dropdown6 = document.getElementById('dropdown6');
        const dropdown7 = document.getElementById('dropdown7');
        const dropdown8 = document.getElementById('dropdown8');                
        const typeDropdown1 = document.getElementById('type1');
        const typeDropdown2 = document.getElementById('type2');
        const typeDropdown3 = document.getElementById('type3');
        const typeDropdown4 = document.getElementById('type4'); 
        const typeDropdown5 = document.getElementById('type5');
        const typeDropdown6 = document.getElementById('type6');
        const typeDropdown7 = document.getElementById('type7');
        const typeDropdown8 = document.getElementById('type8');                
        const subbDiv1 = document.querySelector('.subb');
        const subbDiv2 = document.querySelector('.subb2');
        const subbDiv3 = document.querySelector('.subb3');
        const subbDiv4 = document.querySelector('.subb4'); 
        const subbDiv5 = document.querySelector('.subb5');
        const subbDiv6 = document.querySelector('.subb6');
        const subbDiv7 = document.querySelector('.subb7');
        const subbDiv8 = document.querySelector('.subb8');  
        const subbDiv9 = document.querySelector('.subb9');                        
        const downloadButton = document.getElementById('downloadButton');  

        function updateSubbVisibility() {
            // Show/hide the subbDiv1 based on the selected value of dropdown1
            subbDiv1.style.display = dropdown1.value === 'none' ? 'none' : 'block';
            subbDiv2.style.display = dropdown2.value === 'none' ? 'none' : 'block';
            subbDiv3.style.display = dropdown3.value === 'none' ? 'none' : 'block';
            subbDiv4.style.display = dropdown4.value === 'none' ? 'none' : 'block';  
            subbDiv5.style.display = dropdown5.value === 'none' ? 'none' : 'block';
            subbDiv6.style.display = dropdown6.value === 'none' ? 'none' : 'block';
            subbDiv7.style.display = dropdown7.value === 'none' ? 'none' : 'block';
            subbDiv8.style.display = dropdown8.value === 'none' ? 'none' : 'block'; 
            subbDiv9.style.display = dropdown16.value !== 'home_automation_system' ? 'home_automation_system' : 'block';                                    

            // If dropdown1 is set to none and dropdown2 is not set to none, hide subbDiv1
           // if (dropdown1.value === 'none' && dropdown2.value !== 'none' && dropdown3.value !== 'none' && dropdown3.value !== 'none'&& dropdown4.value !== 'none' && dropdown5.value !== 'none'&& dropdown6.value !== 'none' && dropdown7.value !== 'none'&& dropdown8.value !== 'none') {
            //    subbDiv1.style.display = 'none';
            //}
        }

        dropdown1.addEventListener('change', updateSubbVisibility);
        dropdown2.addEventListener('change', updateSubbVisibility);
        dropdown3.addEventListener('change', updateSubbVisibility);
        dropdown4.addEventListener('change', updateSubbVisibility);    
        dropdown5.addEventListener('change', updateSubbVisibility);
        dropdown6.addEventListener('change', updateSubbVisibility);
        dropdown7.addEventListener('change', updateSubbVisibility);
        dropdown8.addEventListener('change', updateSubbVisibility); 
        dropdown16.addEventListener('change', updateSubbVisibility);         
                      

        downloadButton.addEventListener('click', function () {
            // Get the selected values
            const selectedOptionValue1 = dropdown1.value;
            const selectedOptionValue2 = dropdown2.value;
            const selectedOptionValue3 = dropdown3.value;
            const selectedOptionValue4 = dropdown4.value; 
            const selectedOptionValue5 = dropdown5.value;
            const selectedOptionValue6 = dropdown6.value;
            const selectedOptionValue7 = dropdown7.value;
            const selectedOptionValue8 = dropdown8.value;  
            const selectedOptionValue9 = dropdown9.value;    
            const selectedOptionValue10 = dropdown10.value;    
            const selectedOptionValue11 = dropdown11.value;    
            const selectedOptionValue12 = dropdown12.value;   
            const selectedOptionValue13 = dropdown13.value;  
            const selectedOptionValue14 = dropdown14.value; 
            const selectedOptionValue15 = dropdown15.value;       
            const selectedOptionValue16 = dropdown16.value;                                                                                                                        
            const selectedTypeValue1 = typeDropdown1.value;
            const selectedTypeValue2 = typeDropdown2.value;
            const selectedTypeValue3 = typeDropdown3.value;
            const selectedTypeValue4 = typeDropdown4.value; 
            const selectedTypeValue5 = typeDropdown5.value;
            const selectedTypeValue6 = typeDropdown6.value;
            const selectedTypeValue7 = typeDropdown7.value;
            const selectedTypeValue8 = typeDropdown8.value;                                  

            // Get text entry values
            const textEntry1 = document.getElementById('textEntry1').value;
            const textEntry2 = document.getElementById('textEntry2').value;
            const textEntry3 = document.getElementById('textEntry3').value;
            const textEntry4 = document.getElementById('textEntry4').value;
            const textEntry5 = document.getElementById('textEntry5').value;
            const textEntry6 = document.getElementById('textEntry6').value;

            // Create the YAML configuration string based on the selected type
            let yamlConfig = '';
            let additionalConfig = '';
            
            if (selectedOptionValue1 !== 'none' || selectedOptionValue2 !== 'none' || selectedOptionValue3 !== 'none' || selectedOptionValue4 !== 'none' || selectedOptionValue5 !== 'none' || selectedOptionValue6 !== 'none' || selectedOptionValue7 !== 'none' || selectedOptionValue8 !== 'none') {
                additionalConfig += `   
substitutions:           
                `;
            }  
            
            if (selectedTypeValue1 === '16 GPIO Rack Card 1' || selectedTypeValue2 === '16 GPIO Rack Card 1' || selectedTypeValue3 === '16 GPIO Rack Card 1' || selectedTypeValue4 === '16 GPIO Rack Card 1' || selectedTypeValue5 === '16 GPIO Rack Card 1' || selectedTypeValue6 === '16 GPIO Rack Card 1' || selectedTypeValue7 === '16 GPIO Rack Card 1' || selectedTypeValue8 === '16 GPIO Rack Card 1') {
                additionalConfig += `
  gpio_rack_card_1_device_1: "GPIO 1"
  gpio_rack_card_1_device_2: "GPIO 2"
  gpio_rack_card_1_device_3: "GPIO 3"
  gpio_rack_card_1_device_4: "GPIO 4"
  gpio_rack_card_1_device_5: "GPIO 5"
  gpio_rack_card_1_device_6: "GPIO 6"
  gpio_rack_card_1_device_7: "GPIO 7"
  gpio_rack_card_1_device_8: "GPIO 8"
  gpio_rack_card_1_device_9: "GPIO 9"
  gpio_rack_card_1_device_10: "GPIO 10"
  gpio_rack_card_1_device_11: "GPIO 11"
  gpio_rack_card_1_device_12: "GPIO 12"
  gpio_rack_card_1_device_13: "GPIO 13"
  gpio_rack_card_1_device_14: "GPIO 14"
  gpio_rack_card_1_device_15: "GPIO 15"
  gpio_rack_card_1_device_16: "GPIO 16"  
            `;
            }            
            if (selectedTypeValue1 === '16 GPIO Rack Card 2' || selectedTypeValue2 === '16 GPIO Rack Card 2' || selectedTypeValue3 === '16 GPIO Rack Card 2' || selectedTypeValue4 === '16 GPIO Rack Card 2' || selectedTypeValue5 === '16 GPIO Rack Card 2' || selectedTypeValue6 === '16 GPIO Rack Card 2' || selectedTypeValue7 === '16 GPIO Rack Card 2' || selectedTypeValue8 === '16 GPIO Rack Card 2') {
                additionalConfig += `
  gpio_rack_card_2_device_1: "GPIO 17"
  gpio_rack_card_2_device_2: "GPIO 18"
  gpio_rack_card_2_device_3: "GPIO 19"
  gpio_rack_card_2_device_4: "GPIO 20"
  gpio_rack_card_2_device_5: "GPIO 21"
  gpio_rack_card_2_device_6: "GPIO 22"
  gpio_rack_card_2_device_7: "GPIO 23"
  gpio_rack_card_2_device_8: "GPIO 24"
  gpio_rack_card_2_device_9: "GPIO 25"
  gpio_rack_card_2_device_10: "GPIO 26"
  gpio_rack_card_2_device_11: "GPIO 27"
  gpio_rack_card_2_device_12: "GPIO 28"
  gpio_rack_card_2_device_13: "GPIO 29"
  gpio_rack_card_2_device_14: "GPIO 30"
  gpio_rack_card_2_device_15: "GPIO 31"
  gpio_rack_card_2_device_16: "GPIO 32"  
            `;            
            }
            if (selectedTypeValue1 === '16 GPIO Rack Card 3' || selectedTypeValue2 === '16 GPIO Rack Card 3' || selectedTypeValue3 === '16 GPIO Rack Card 3' || selectedTypeValue4 === '16 GPIO Rack Card 3' || selectedTypeValue5 === '16 GPIO Rack Card 3' || selectedTypeValue6 === '16 GPIO Rack Card 3' || selectedTypeValue7 === '16 GPIO Rack Card 3' || selectedTypeValue8 === '16 GPIO Rack Card 3') {
                additionalConfig += `
  gpio_rack_card_3_device_1: "GPIO 33"
  gpio_rack_card_3_device_2: "GPIO 34"
  gpio_rack_card_3_device_3: "GPIO 35"
  gpio_rack_card_3_device_4: "GPIO 36"
  gpio_rack_card_3_device_5: "GPIO 37"
  gpio_rack_card_3_device_6: "GPIO 38"
  gpio_rack_card_3_device_7: "GPIO 39"
  gpio_rack_card_3_device_8: "GPIO 40"
  gpio_rack_card_3_device_9: "GPIO 41"
  gpio_rack_card_3_device_10: "GPIO 42"
  gpio_rack_card_3_device_11: "GPIO 43"
  gpio_rack_card_3_device_12: "GPIO 44"
  gpio_rack_card_3_device_13: "GPIO 45"
  gpio_rack_card_3_device_14: "GPIO 46"
  gpio_rack_card_3_device_15: "GPIO 47"
  gpio_rack_card_3_device_16: "GPIO 48"  
            `;            
            }            
            if (selectedTypeValue1 === '16 GPIO Rack Card 4' || selectedTypeValue2 === '16 GPIO Rack Card 4' || selectedTypeValue3 === '16 GPIO Rack Card 4' || selectedTypeValue4 === '16 GPIO Rack Card 4' || selectedTypeValue5 === '16 GPIO Rack Card 4' || selectedTypeValue6 === '16 GPIO Rack Card 4' || selectedTypeValue7 === '16 GPIO Rack Card 4' || selectedTypeValue8 === '16 GPIO Rack Card 4') {
                additionalConfig += `
  gpio_rack_card_4_device_1: "GPIO 49"
  gpio_rack_card_4_device_2: "GPIO 50"
  gpio_rack_card_4_device_3: "GPIO 51"
  gpio_rack_card_4_device_4: "GPIO 52"
  gpio_rack_card_4_device_5: "GPIO 53"
  gpio_rack_card_4_device_6: "GPIO 54"
  gpio_rack_card_4_device_7: "GPIO 55"
  gpio_rack_card_4_device_8: "GPIO 56"
  gpio_rack_card_4_device_9: "GPIO 57"
  gpio_rack_card_4_device_10: "GPIO 58"
  gpio_rack_card_4_device_11: "GPIO 59"
  gpio_rack_card_4_device_12: "GPIO 60"
  gpio_rack_card_4_device_13: "GPIO 61"
  gpio_rack_card_4_device_14: "GPIO 62"
  gpio_rack_card_4_device_15: "GPIO 63"
  gpio_rack_card_4_device_16: "GPIO 64"  
            `;            
            }
            if (selectedTypeValue1 === '8 Port Relay Board 1' || selectedTypeValue2 === '8 Port Relay Board 1' || selectedTypeValue3 === '8 Port Relay Board 1' || selectedTypeValue4 === '8 Port Relay Board 1' || selectedTypeValue5 === '8 Port Relay Board 1' || selectedTypeValue6 === '8 Port Relay Board 1' || selectedTypeValue7 === '8 Port Relay Board 1' || selectedTypeValue8 === '8 Port Relay Board 1') {
                additionalConfig += `                
  node_8_relay_board_1_device_1: "Relay 1"
  node_8_relay_board_1_device_2: "Relay 2"
  node_8_relay_board_1_device_3: "Relay 3"
  node_8_relay_board_1_device_4: "Relay 4"
  node_8_relay_board_1_device_5: "Relay 5"
  node_8_relay_board_1_device_6: "Relay 6"
  node_8_relay_board_1_device_7: "Relay 7"
  node_8_relay_board_1_device_8: "Relay 8"  
            `;            
            } 
            if (selectedTypeValue1 === '8 Port Relay Board 2' || selectedTypeValue2 === '8 Port Relay Board 2' || selectedTypeValue3 === '8 Port Relay Board 2' || selectedTypeValue4 === '8 Port Relay Board 2' || selectedTypeValue5 === '8 Port Relay Board 2' || selectedTypeValue5 === '8 Port Relay Board 2' || selectedTypeValue7 === '8 Port Relay Board 2' || selectedTypeValue8 === '8 Port Relay Board 2') {
                additionalConfig += `                
  node_8_relay_board_1_device_1: "Relay 9"
  node_8_relay_board_1_device_2: "Relay 10"
  node_8_relay_board_1_device_3: "Relay 11"
  node_8_relay_board_1_device_4: "Relay 12"
  node_8_relay_board_1_device_5: "Relay 13"
  node_8_relay_board_1_device_6: "Relay 14"
  node_8_relay_board_1_device_7: "Relay 15"
  node_8_relay_board_1_device_8: "Relay 16"  
            `;            
            }   
            if (selectedTypeValue1 === '8 Port Relay Board 3' || selectedTypeValue2 === '8 Port Relay Board 3' || selectedTypeValue3 === '8 Port Relay Board 3' || selectedTypeValue4 === '8 Port Relay Board 3' || selectedTypeValue5 === '8 Port Relay Board 3' || selectedTypeValue5 === '8 Port Relay Board 3' || selectedTypeValue7 === '8 Port Relay Board 3' || selectedTypeValue8 === '8 Port Relay Board 3') {
                additionalConfig += `                
  node_8_relay_board_1_device_1: "Relay 17"
  node_8_relay_board_1_device_2: "Relay 18"
  node_8_relay_board_1_device_3: "Relay 19"
  node_8_relay_board_1_device_4: "Relay 20"
  node_8_relay_board_1_device_5: "Relay 21"
  node_8_relay_board_1_device_6: "Relay 22"
  node_8_relay_board_1_device_7: "Relay 23"
  node_8_relay_board_1_device_8: "Relay 24"  
            `;            
            }
            if (selectedTypeValue1 === '8 Port Relay Board 4' || selectedTypeValue2 === '8 Port Relay Board 4' || selectedTypeValue3 === '8 Port Relay Board 4' || selectedTypeValue4 === '8 Port Relay Board 4' || selectedTypeValue5 === '8 Port Relay Board 4' || selectedTypeValue5 === '8 Port Relay Board 4' || selectedTypeValue7 === '8 Port Relay Board 4' || selectedTypeValue8 === '8 Port Relay Board 4') {
                additionalConfig += `                
  node_8_relay_board_1_device_1: "Relay 25"
  node_8_relay_board_1_device_2: "Relay 26"
  node_8_relay_board_1_device_3: "Relay 27"
  node_8_relay_board_1_device_4: "Relay 28"
  node_8_relay_board_1_device_5: "Relay 29"
  node_8_relay_board_1_device_6: "Relay 30"
  node_8_relay_board_1_device_7: "Relay 31"
  node_8_relay_board_1_device_8: "Relay 32"  
            `;   
            }                        
 
            if (selectedOptionValue1 !== 'none' || selectedOptionValue2 !== 'none' || selectedOptionValue3 !== 'none' || selectedOptionValue4 !== 'none' || selectedOptionValue5 !== 'none' || selectedOptionValue6 !== 'none' || selectedOptionValue7 !== 'none' || selectedOptionValue8 !== 'none') {
                additionalConfig += `   
mcp23017:           
            `;
            }  
            if (selectedTypeValue1 === '16 GPIO Rack Card 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_1'
    address: ${selectedOptionValue1} 
            `;
            }  
            if (selectedTypeValue2 === '16 GPIO Rack Card 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_1'
    address: ${selectedOptionValue2} 
            `;
            }                
            if (selectedTypeValue3 === '16 GPIO Rack Card 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_1'
    address: ${selectedOptionValue3} 
            `;
            }  
            if (selectedTypeValue4 === '16 GPIO Rack Card 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_1'
    address: ${selectedOptionValue4} 
            `;
            }  
            if (selectedTypeValue5 === '16 GPIO Rack Card 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_1'
    address: ${selectedOptionValue5} 
            `;
            }                
            if (selectedTypeValue6 === '16 GPIO Rack Card 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_1'
    address: ${selectedOptionValue6} 
            `;
            }              
            if (selectedTypeValue7 === '16 GPIO Rack Card 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_1'
    address: ${selectedOptionValue7} 
            `;
            }  
            if (selectedTypeValue8 === '16 GPIO Rack Card 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_1'
    address: ${selectedOptionValue8} 
            `;
            }   
            if (selectedTypeValue1 === '16 GPIO Rack Card 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_2'
    address: ${selectedOptionValue1} 
            `;
            }  
            if (selectedTypeValue2 === '16 GPIO Rack Card 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_2'
    address: ${selectedOptionValue2} 
            `;
            }                            
            if (selectedTypeValue3 === '16 GPIO Rack Card 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_2'
    address: ${selectedOptionValue3} 
            `;
            }  
            if (selectedTypeValue4 === '16 GPIO Rack Card 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_2'
    address: ${selectedOptionValue4} 
            `;
            }  
            if (selectedTypeValue5 === '16 GPIO Rack Card 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_2'
    address: ${selectedOptionValue5} 
            `;
            }                
            if (selectedTypeValue6 === '16 GPIO Rack Card 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_2'
    address: ${selectedOptionValue6} 
            `;
            }              
            if (selectedTypeValue7 === '16 GPIO Rack Card 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_2'
    address: ${selectedOptionValue7} 
            `;
            }  
            if (selectedTypeValue8 === '16 GPIO Rack Card 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_2'
    address: ${selectedOptionValue8} 
            `;
            }       
            if (selectedTypeValue1 === '16 GPIO Rack Card 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_3'
    address: ${selectedOptionValue1} 
            `;
            }  
            if (selectedTypeValue2 === '16 GPIO Rack Card 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_3'
    address: ${selectedOptionValue2} 
            `;
            }                            
            if (selectedTypeValue3 === '16 GPIO Rack Card 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_3'
    address: ${selectedOptionValue3} 
            `;
            }  
            if (selectedTypeValue4 === '16 GPIO Rack Card 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_3'
    address: ${selectedOptionValue4} 
            `;
            }  
            if (selectedTypeValue5 === '16 GPIO Rack Card 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_3'
    address: ${selectedOptionValue5} 
            `;
            }                
            if (selectedTypeValue6 === '16 GPIO Rack Card 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_3'
    address: ${selectedOptionValue6} 
            `;
            }              
            if (selectedTypeValue7 === '16 GPIO Rack Card 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_3'
    address: ${selectedOptionValue7} 
            `;
            }  
            if (selectedTypeValue8 === '16 GPIO Rack Card 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_3'
    address: ${selectedOptionValue8} 
            `;
            }  
            if (selectedTypeValue1 === '16 GPIO Rack Card 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_4'
    address: ${selectedOptionValue1} 
            `;
            }  
            if (selectedTypeValue2 === '16 GPIO Rack Card 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_4'
    address: ${selectedOptionValue2} 
            `;
            }                            
            if (selectedTypeValue3 === '16 GPIO Rack Card 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_4'
    address: ${selectedOptionValue3} 
            `;
            }  
            if (selectedTypeValue4 === '16 GPIO Rack Card 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_4'
    address: ${selectedOptionValue4} 
            `;
            }  
            if (selectedTypeValue5 === '16 GPIO Rack Card 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_4'
    address: ${selectedOptionValue5} 
            `;
            }                
            if (selectedTypeValue6 === '16 GPIO Rack Card 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_4'
    address: ${selectedOptionValue6} 
            `;
            }              
            if (selectedTypeValue7 === '16 GPIO Rack Card 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_4'
    address: ${selectedOptionValue7} 
            `;
            }  
            if (selectedTypeValue8 === '16 GPIO Rack Card 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_16_gpio_rack_card_4'
    address: ${selectedOptionValue8} 
            `;
            }        
            if (selectedTypeValue1 === 'Button Controller' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_button_keypad'
    address: ${selectedOptionValue1} 
            `;
            }  
            if (selectedTypeValue2 === 'Button Controller' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_button_keypad'
    address: ${selectedOptionValue2} 
            `;
            }                            
            if (selectedTypeValue3 === 'Button Controller' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_button_keypad'
    address: ${selectedOptionValue3} 
            `;
            }  
            if (selectedTypeValue4 === 'Button Controller' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_button_keypad'
    address: ${selectedOptionValue4} 
            `;
            }  
            if (selectedTypeValue5 === 'Button Controller' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_button_keypad'
    address: ${selectedOptionValue5} 
            `;
            }                
            if (selectedTypeValue6 === 'Button Controller' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_button_keypad'
    address: ${selectedOptionValue6} 
            `;
            }              
            if (selectedTypeValue7 === 'Button Controller' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_button_keypad'
    address: ${selectedOptionValue7} 
            `;
            }  
            if (selectedTypeValue8 === 'Button Controller' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_button_keypad'
    address: ${selectedOptionValue8} 
            `;
            }               
            if (selectedTypeValue1 === '8 Port Relay Board 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_1'
    address: ${selectedOptionValue1} 
            `;
            }  
            if (selectedTypeValue2 === '8 Port Relay Board 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_1'
    address: ${selectedOptionValue2} 
            `;
            }       
            if (selectedTypeValue3 === '8 Port Relay Board 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_1'
    address: ${selectedOptionValue3} 
            `;
            }        
            if (selectedTypeValue4 === '8 Port Relay Board 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_1'
    address: ${selectedOptionValue4} 
            `;
            }   
            if (selectedTypeValue5 === '8 Port Relay Board 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_1'
    address: ${selectedOptionValue5} 
            `;
            }  
            if (selectedTypeValue6 === '8 Port Relay Board 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_1'
    address: ${selectedOptionValue6} 
            `;
            }       
            if (selectedTypeValue7 === '8 Port Relay Board 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_1'
    address: ${selectedOptionValue7} 
            `;
            }        
            if (selectedTypeValue8 === '8 Port Relay Board 1' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_1'
    address: ${selectedOptionValue8} 
            `;
            }        
            if (selectedTypeValue1 === '8 Port Relay Board 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_2'
    address: ${selectedOptionValue1} 
            `;
            }  
            if (selectedTypeValue2 === '8 Port Relay Board 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_2'
    address: ${selectedOptionValue2} 
            `;
            }       
            if (selectedTypeValue3 === '8 Port Relay Board 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_2'
    address: ${selectedOptionValue3} 
            `;
            }        
            if (selectedTypeValue4 === '8 Port Relay Board 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_2'
    address: ${selectedOptionValue4} 
            `;
            }   
            if (selectedTypeValue5 === '8 Port Relay Board 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_2'
    address: ${selectedOptionValue5} 
            `;
            }  
            if (selectedTypeValue6 === '8 Port Relay Board 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_2'
    address: ${selectedOptionValue6} 
            `;
            }       
            if (selectedTypeValue7 === '8 Port Relay Board 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_2'
    address: ${selectedOptionValue7} 
            `;
            }        
            if (selectedTypeValue8 === '8 Port Relay Board 2' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_2'
    address: ${selectedOptionValue8} 
            `;
            }   
            if (selectedTypeValue1 === '8 Port Relay Board 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_3'
    address: ${selectedOptionValue1} 
            `;
            }  
            if (selectedTypeValue2 === '8 Port Relay Board 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_3'
    address: ${selectedOptionValue2} 
            `;
            }       
            if (selectedTypeValue3 === '8 Port Relay Board 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_3'
    address: ${selectedOptionValue3} 
            `;
            }        
            if (selectedTypeValue4 === '8 Port Relay Board 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_3'
    address: ${selectedOptionValue4} 
            `;
            }   
            if (selectedTypeValue5 === '8 Port Relay Board 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_3'
    address: ${selectedOptionValue5} 
            `;
            }  
            if (selectedTypeValue6 === '8 Port Relay Board 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_3'
    address: ${selectedOptionValue6} 
            `;
            }       
            if (selectedTypeValue7 === '8 Port Relay Board 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_3'
    address: ${selectedOptionValue7} 
            `;
            }        
            if (selectedTypeValue8 === '8 Port Relay Board 3' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_3'
    address: ${selectedOptionValue8} 
            `;
            }        
            if (selectedTypeValue1 === '8 Port Relay Board 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_4'
    address: ${selectedOptionValue1} 
            `;
            }  
            if (selectedTypeValue2 === '8 Port Relay Board 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_4'
    address: ${selectedOptionValue2} 
            `;
            }       
            if (selectedTypeValue3 === '8 Port Relay Board 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_4'
    address: ${selectedOptionValue3} 
            `;
            }        
            if (selectedTypeValue4 === '8 Port Relay Board 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_4'
    address: ${selectedOptionValue4} 
            `;
            }   
            if (selectedTypeValue5 === '8 Port Relay Board 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_4'
    address: ${selectedOptionValue5} 
            `;
            }  
            if (selectedTypeValue6 === '8 Port Relay Board 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_4'
    address: ${selectedOptionValue6} 
            `;
            }       
            if (selectedTypeValue7 === '8 Port Relay Board 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_4'
    address: ${selectedOptionValue7} 
            `;
            }        
            if (selectedTypeValue8 === '8 Port Relay Board 4' ) {
                additionalConfig += `
  - id: 'mcp23017_hub_8_relay_board_4'
    address: ${selectedOptionValue8} 
            `;
            }                                                                                                       
          additionalConfig += `
esphome:
  name: ${textEntry1}
  friendly_name: ${textEntry5}  
  on_boot:
       - delay: 1s
       `;
       if (selectedOptionValue11 === 'Enabled' || selectedOptionValue1 !== 'none' || selectedOptionValue2 !== 'none' || selectedOptionValue3 !== 'none' || selectedOptionValue4 !== 'none' || selectedOptionValue5 !== 'none' || selectedOptionValue6 !== 'none' || selectedOptionValue7 !== 'none' || selectedOptionValue8 !== 'none') {
                additionalConfig += `   
       - text_sensor.template.publish:
          id: last_name_pressed
          state: ""    
       - text_sensor.template.publish:
          id: last_state_pressed
          state: ""              
                `;
            }       
            additionalConfig += `               
esp32:
  board: esp-wrover-kit
  framework: 
    type: esp-idf

    `; 
    if (selectedOptionValue14 === 'Enabled' ) {
                additionalConfig += `   
web_server:
  port: 80
  auth:
    username: ${textEntry3}
    password: ${textEntry4}           
                `;
            }
            additionalConfig += `  
                                 
ota:  
`; 
    if (selectedOptionValue11 === 'Enabled' ) {
                additionalConfig += `   
  password: ${textEntry2}             
                `;
            }
            additionalConfig += `              
ethernet:
  id: eth
  type: LAN8720
  mdc_pin: GPIO23
  mdio_pin: GPIO18
  clk_mode: GPIO0_IN
  phy_addr: 1
  power_pin: GPIO16
api:
`; 
    if (selectedOptionValue15 === 'Enabled' ) {
                additionalConfig += `   
                encryption:
    key: "${textEntry6}"           
                `;
            }
            additionalConfig += `  
  reboot_timeout: 0s      
i2c:
  sda: 14
  scl: 15
  scan: true 
  `;
    if (selectedOptionValue10 === 'Enabled' ) {
                additionalConfig += `   
display:
  - platform: ssd1306_i2c
    model: "SSD1306 128x64"
    address: 0x3C
    lambda: |-
            if (id(system_status).state) {
              it.print(40, -3, id(my_font_30b), id(my_green), "Online");
            }
            else {
              it.print(40, -5, id(my_font_30b), id(my_yellow), "Offline");
            }
            it.printf(it.get_width() / 2, 14, id(my_font_20b), id(my_blue), TextAlign::CENTER_HORIZONTAL," %s",id(last_name_pressed).state.c_str()); 
            it.printf(it.get_width() / 2, 24, id(my_font_20b), id(my_blue), TextAlign::CENTER_HORIZONTAL," %s",id(last_state_pressed).state.c_str());             
            it.print(0, 34, id(my_font_20b), id(my_white), "IP");                                              
            it.printf(it.get_width() / 2, 46, id(my_font_13b), id(my_green), TextAlign::CENTER_HORIZONTAL, " %s",id(uptime_human).state.c_str());   
   #         it.printf(it.get_width() / 2,34, id(my_font_20b), id(my_white), TextAlign::CENTER_HORIZONTAL, " %s",id(ipaddress).state.c_str());           
color:
  - id: my_red
    red: 100%
    green: 0%
    blue: 0%
  - id: my_yellow
    red: 100%
    green: 100%
    blue: 0%
  - id: my_green
    red: 0%
    green: 100%
    blue: 0%
  - id: my_blue
    red: 0%
    green: 0%
    blue: 100%
  - id: my_gray
    red: 50%
    green: 50%
    blue: 50%   
  - id: my_white
    red: 100%
    green: 100%
    blue: 100%              
font:
  - file: "_fonts/refsan.ttf"
    id: my_font_30
    size: 30
  - file: "_fonts/refsan.ttf"
    id: my_font_20
    size: 20
  - file: "_fonts/refsan.ttf"
    id: my_font_13
    size: 13
  - file: "_fonts/refsan.ttf"
    id: my_font_15
    size: 15    
  - file: "_fonts/refsan.ttf"
    id: my_font_10
    size: 10   
  - file: "_fonts/refsan.ttf"
    id: my_font_30b
    size: 15
  - file: "_fonts/refsan.ttf"
    id: my_font_20b
    size: 10
  - file: "_fonts/refsan.ttf"
    id: my_font_13b
    size: 10  
  - file: "_fonts/refsan.ttf"
    id: my_font_15b
    size: 15    
  - file: "_fonts/refsan.ttf"
    id: my_font_10b
    size: 15 
                `;
              }            
              additionalConfig += `   
text_sensor:
`;
    if (selectedOptionValue11 === 'Enabled' || selectedOptionValue1 !== 'none' || selectedOptionValue2 !== 'none' || selectedOptionValue3 !== 'none' || selectedOptionValue4 !== 'none' || selectedOptionValue5 !== 'none' || selectedOptionValue6 !== 'none' || selectedOptionValue7 !== 'none' || selectedOptionValue8 !== 'none') {
                additionalConfig += `   
  - platform: template
    id: last_state_pressed    
    name: ${textEntry5} State
    icon: "mdi:state-machine"
  - platform: template
    id: last_name_pressed        
    name: ${textEntry5} Device    
    icon: "mdi:state-machine"            
                `;
            }   
    if (selectedOptionValue11 === 'Enabled' ) {
                additionalConfig += `   
  - platform: template
    id: uptime_human 
    name: Update    
    icon: mdi:clock-start              
                `;
            }   
            additionalConfig += ` 
  - platform: template
    name: "Device IP"
    id: ipaddress
    entity_category: diagnostic
    icon: "mdi:ip-network"
    lambda: return { id(eth).get_ip_address().str() };
    update_interval: 5s  
    `;  
    if (selectedOptionValue11 === 'Enabled' ) {
                additionalConfig += `   
sensor:
  - platform: uptime
    id: uptime_sensor
    update_interval: 1s
    on_raw_value:
      then:
        - text_sensor.template.publish:
            id: uptime_human
            state: !lambda |-
              int seconds = round(id(uptime_sensor).raw_state);
              int days = seconds / (24 * 3600);
              seconds = seconds % (24 * 3600);
              int hours = seconds / 3600;
              seconds = seconds % 3600;
              int minutes = seconds /  60;
              seconds = seconds % 60;
              return (
                (days ? to_string(days) + "d " : "") +
                (hours ? to_string(hours) + "h " : "") +
                (minutes ? to_string(minutes) + "m " : "") +
                (to_string(seconds) + "s")
              ).c_str();               
                `;
            }   
    if (selectedOptionValue12 === 'Enabled' ) {
                additionalConfig += `   
light:
  - platform: esp32_rmt_led_strip
    id: statusledlight
    name: "Status LED RGB"
    pin: 33
    num_leds: 1
    rmt_channel: 1
    rgb_order: GRB
    chipset: ws2812
    icon: "mdi:led-outline"
    max_refresh_rate: 500ms           
                `;
            }   
            additionalConfig += `
switch:
  - platform: restart
    id: "restart_system"
  - platform: gpio
    pin: GPIO32
    name: Pico Buzzer
    inverted: no  
    id: buzzer
    icon: "mdi:surround-sound"
  - platform: gpio
    pin: GPIO04
    name: On Board Relay
    icon: "mdi:electric-switch"
    inverted: no  
    id: relay
    `;
    if (typeDropdown1 !== 'Button Controller' || typeDropdown2 !== 'Button Controller' || typeDropdown3 !== 'Button Controller' || typeDropdown4 !== 'Button Controller' || typeDropdown5 !== 'Button Controller' || typeDropdown6 !== 'Button Controller' || typeDropdown7 !== 'Button Controller' || typeDropdown8 !== 'Button Controller') {
                additionalConfig += `   
  - platform: gpio
    name: Key Light 8
    id: key_light_8
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 15
      mode:
       output: true
      inverted: false           
      
  - platform: gpio
    name: Key Light 7
    id: key_light_7
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 14
      mode:
       output: true
      inverted: false          
      
  - platform: gpio
    name: Key Light 6
    id: key_light_6
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 13
      mode:
       output: true
      inverted: false       
      
  - platform: gpio
    name: Key Light 5
    id: key_light_5
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 12
      mode:
       output: true
      inverted: false         

  - platform: gpio
    name: Key Light 4
    id: key_light_4
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 11
      mode:
       output: true
      inverted: false           
          
  - platform: gpio
    name: Key Light 3
    id: key_light_3
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 10
      mode:
       output: true
      inverted: false  
       
      
  - platform: gpio
    name: Key Light 2
    id: key_light_2
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 9
      mode:
       output: true
      inverted: false      

  - platform: gpio
    name: Key Light 1
    id: key_light_1
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 8
      mode:
       output: true
      inverted: false          
                `;
            }     
    if (selectedOptionValue9 === 'Enabled' ) {
                additionalConfig += `   
logger:                
                `;
            }                     
//////////////////////////  BINARY SENSOR   //////////////////////                                                 
          additionalConfig += `
binary_sensor:
  - platform: status
    id: system_status
    name: status
    `;
    if (selectedOptionValue12 === 'Enabled' ) {
                additionalConfig += `    
    on_press:
          then:
            - light.turn_on: 
                id: statusledlight
                green: 1.0
                red: 0.0
                blue: 0.0
                brightness: 30%      
    on_release:
          then:           
            - light.turn_on: 
                id: statusledlight
                red: 1.0
                green: 0.0
                blue: 0.0
                brightness: 30%          
                `;
            }       
            if (typeDropdown1 !== 'Button Controller' || typeDropdown2 !== 'Button Controller' || typeDropdown3 !== 'Button Controller' || typeDropdown4 !== 'Button Controller' || typeDropdown5 !== 'Button Controller' || typeDropdown6 !== 'Button Controller' || typeDropdown7 !== 'Button Controller' || typeDropdown8 !== 'Button Controller') {
                additionalConfig += `   
  - platform: gpio
    name: Key 1
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 0
      mode:
        input: True
        pullup: True          
      inverted: True
    on_press:
      then: 
        - switch.turn_on: key_light_1
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 1");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - switch.turn_off: key_light_1      
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 1");
            id(last_state_pressed).publish_state("OFF");  
      
  - platform: gpio
    name: Key 2
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 1
      mode:
        input: True
        pullup: True    
      inverted: True
    on_press:
      then: 
        - switch.turn_on: key_light_2      
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 2");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - switch.turn_off: key_light_2        
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 2");
            id(last_state_pressed).publish_state("OFF");    
      
  - platform: gpio
    name: Key 3
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 2
      mode:
        input: True
        pullup: True           
      inverted: True
    on_press:
      then: 
        - switch.turn_on: key_light_3       
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 3");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - switch.turn_off: key_light_3 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 3");
            id(last_state_pressed).publish_state("OFF");          
      
  - platform: gpio
    name: Key 4
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 3
      mode:
        input: True
        pullup: True         
      inverted: True   
    on_press:
      then: 
        - switch.turn_on: key_light_4
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 4");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - switch.turn_off: key_light_4
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 4");
            id(last_state_pressed).publish_state("OFF");                 

  - platform: gpio
    name: Key 5
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 4
      mode:
        input: True
        pullup: True   
      inverted: True
    on_press:
      then: 
        - switch.turn_on: key_light_5
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 5");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - switch.turn_off: key_light_5
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 5");
            id(last_state_pressed).publish_state("OFF");       
          
  - platform: gpio
    name: Key 6
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 5
      mode:
        input: True
        pullup: True        
      inverted: True
    on_press:
      then: 
        - switch.turn_on: key_light_6
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 6");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - switch.turn_off: key_light_6
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 6");
            id(last_state_pressed).publish_state("OFF");          
      
  - platform: gpio
    name: Key 7
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 6
      mode:
        input: True
        pullup: True      
      inverted: True
    on_press:
      then: 
        - switch.turn_on: key_light_7
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 7");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - switch.turn_off: key_light_7
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 7");
            id(last_state_pressed).publish_state("OFF");  

  - platform: gpio
    name: Key 8
    pin:
      mcp23xxx: mcp23017_hub_8_button_keypad
      number: 7
      mode:
        input: True
        pullup: True           
      inverted: True
    on_press:
      then: 
        - switch.turn_on: key_light_8
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 8");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - switch.turn_off: key_light_8
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("Key 8");
            id(last_state_pressed).publish_state("OFF");    
                `;
            }                                       
                if (selectedTypeValue1 === '16 GPIO Rack Card 1' || selectedTypeValue2 === '16 GPIO Rack Card 1' || selectedTypeValue3 === '16 GPIO Rack Card 1' || selectedTypeValue4 === '16 GPIO Rack Card 1') {
                additionalConfig += `                   
  - platform: template
    name: $gpio_rack_card_1_device_1
    id: device_1_invert
    lambda: |-
      if ((id(rack_1_device).state == true && id(device_1_set_1_16) == 1) || 
          (id(rack_1_device).state == false && id(device_1_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_1");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_1");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_1_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 0
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_2
    id: device_2_invert
    lambda: |-
      if ((id(rack_2_device).state == true && id(device_2_set_1_16) == 1) || 
          (id(rack_2_device).state == false && id(device_2_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_2");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:       
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_2");
            id(last_state_pressed).publish_state("OFF");          
  - platform: gpio
    id: rack_2_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 1
      mode:
        input: True
        pullup: True    
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_3
    id: device_3_invert
    lambda: |-
      if ((id(rack_3_device).state == true && id(device_3_set_1_16) == 1) || 
          (id(rack_3_device).state == false && id(device_3_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }      
    on_press:
      then:    
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_3");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_3");
            id(last_state_pressed).publish_state("OFF");          

  - platform: gpio
    id: rack_3_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 2
      mode:
        input: True
        pullup: True           
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_4
    id: device_4_invert
    lambda: |-
      if ((id(rack_4_device).state == true && id(device_4_set_1_16) == 1) || 
          (id(rack_4_device).state == false && id(device_4_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }   
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_4");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_4");
            id(last_state_pressed).publish_state("OFF");              
  - platform: gpio
    id: rack_4_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 3
      mode:
        input: True
        pullup: True         
      inverted: True   
                
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_5
    id: device_5_invert
    lambda: |-
      if ((id(rack_5_device).state == true && id(device_5_set_1_16) == 1) || 
          (id(rack_5_device).state == false && id(device_5_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      } 
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_5");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("K$gpio_rack_card_1_device_5");
            id(last_state_pressed).publish_state("OFF");           
  - platform: gpio
    id: rack_5_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 4
      mode:
        input: True
        pullup: True   
      inverted: True
      
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_6
    id: device_6_invert
    lambda: |-
      if ((id(rack_6_device).state == true && id(device_6_set_1_16) == 1) || 
          (id(rack_6_device).state == false && id(device_6_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }  
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_6");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_6");
            id(last_state_pressed).publish_state("OFF");                 
  - platform: gpio
    id: rack_6_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 5
      mode:
        input: True
        pullup: True        
      inverted: True
        
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_7
    id: device_7_invert
    lambda: |-
      if ((id(rack_7_device).state == true && id(device_7_set_1_16) == 1) || 
          (id(rack_7_device).state == false && id(device_7_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }    
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_7");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_7");
            id(last_state_pressed).publish_state("OFF");             
  - platform: gpio
    id: rack_7_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 6
      mode:
        input: True
        pullup: True      
      inverted: True

  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_8
    id: device_8_invert
    lambda: |-
      if ((id(rack_8_device).state == true && id(device_8_set_1_16) == 1) || 
          (id(rack_8_device).state == false && id(device_8_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }    
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_8");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_8");
            id(last_state_pressed).publish_state("OFF");        
  - platform: gpio
    id: rack_8_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 7
      mode:
        input: True
        pullup: True           
      inverted: True
   
  - platform: template
    name: $gpio_rack_card_1_device_9
    id: device_9_invert
    lambda: |-
      if ((id(rack_9_device).state == true && id(device_9_set_1_16) == 1) || 
          (id(rack_9_device).state == false && id(device_9_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_9");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_9");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_9_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 8
      mode:
        input: True
        pullup: True          
      inverted: True

  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_10
    id: device_10_invert
    lambda: |-
      if ((id(rack_10_device).state == true && id(device_10_set_1_16) == 1) || 
          (id(rack_10_device).state == false && id(device_10_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_10");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:       
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_10");
            id(last_state_pressed).publish_state("OFF");    
      
  - platform: gpio
    id: rack_10_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 9
      mode:
        input: True
        pullup: True    
      inverted: True

  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_11
    id: device_11_invert
    lambda: |-
      if ((id(rack_11_device).state == true && id(device_11_set_1_16) == 1) || 
          (id(rack_11_device).state == false && id(device_11_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }    
    on_press:
      then:    
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_11");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_11");
            id(last_state_pressed).publish_state("OFF");           
  - platform: gpio
    id: rack_11_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 10
      mode:
        input: True
        pullup: True           
      inverted: True
       

  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_12
    id: device_12_invert
    lambda: |-
      if ((id(rack_12_device).state == true && id(device_12_set_1_16) == 1) || 
          (id(rack_12_device).state == false && id(device_12_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }  
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_12");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_12");
            id(last_state_pressed).publish_state("OFF");                
  - platform: gpio
    id: rack_12_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 11
      mode:
        input: True
        pullup: True         
      inverted: True   
               
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_13
    id: device_13_invert
    lambda: |-
      if ((id(rack_13_device).state == true && id(device_13_set_1_16) == 1) || 
          (id(rack_13_device).state == false && id(device_13_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }   
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_13");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("K$gpio_rack_card_1_device_13");
            id(last_state_pressed).publish_state("OFF");           
  - platform: gpio
    id: rack_13_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 12
      mode:
        input: True
        pullup: True   
      inverted: True
    
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_14
    id: device_14_invert
    lambda: |-
      if ((id(rack_14_device).state == true && id(device_14_set_1_16) == 1) || 
          (id(rack_14_device).state == false && id(device_14_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }      
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_14");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_14");
            id(last_state_pressed).publish_state("OFF");             
  - platform: gpio
    id: rack_14_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 13
      mode:
        input: True
        pullup: True        
      inverted: True
        
  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_15
    id: device_15_invert
    lambda: |-
      if ((id(rack_15_device).state == true && id(device_15_set_1_16) == 1) || 
          (id(rack_15_device).state == false && id(device_15_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }     
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_15");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_15");
            id(last_state_pressed).publish_state("OFF");            
  - platform: gpio
    id: rack_15_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 14
      mode:
        input: True
        pullup: True      
      inverted: True

  #########################################################################
  - platform: template
    name: $gpio_rack_card_1_device_16
    id: device_16_invert
    lambda: |-
      if ((id(rack_16_device).state == true && id(device_16_set_1_16) == 1) || 
          (id(rack_16_device).state == false && id(device_16_set_1_16) == 2))
      {
        return true;
      } else {
        return false;
      }    
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_16");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:  
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_1_device_16");
            id(last_state_pressed).publish_state("OFF");          
  - platform: gpio
    id: rack_16_device
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_1
      number: 15
      mode:
        input: True
        pullup: True           
      inverted: True
  `;  
          }       
          if (selectedTypeValue1 === '16 GPIO Rack Card 2' || selectedTypeValue2 === '16 GPIO Rack Card 2' || selectedTypeValue3 === '16 GPIO Rack Card 2' || selectedTypeValue4 === '16 GPIO Rack Card 2') {
                additionalConfig += `   
  - platform: template
    name: $gpio_rack_card_2_device_1
    id: device_1_invert_2
    lambda: |-
      if ((id(rack_2_device_1).state == true && id(device_1_set_17_32) == 1) || 
          (id(rack_2_device_1).state == false && id(device_1_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_1");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_1");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_1
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 0
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_2
    id: device_2_invert_2
    lambda: |-
      if ((id(rack_2_device_2).state == true && id(device_2_set_17_32) == 1) || 
          (id(rack_2_device_2).state == false && id(device_2_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_2");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_2");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_2
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 1
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_3
    id: device_3_invert_2
    lambda: |-
      if ((id(rack_2_device_3).state == true && id(device_3_set_17_32) == 1) || 
          (id(rack_2_device_3).state == false && id(device_3_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_3");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_3");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_3
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 2
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_4
    id: device_4_invert_2
    lambda: |-
      if ((id(rack_2_device_4).state == true && id(device_4_set_17_32) == 1) || 
          (id(rack_2_device_4).state == false && id(device_4_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_4");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_4");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_4
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 3
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_5
    id: device_5_invert_2
    lambda: |-
      if ((id(rack_2_device_5).state == true && id(device_5_set_17_32) == 1) || 
          (id(rack_2_device_5).state == false && id(device_5_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_5");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_5");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_5
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 4
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_6
    id: device_6_invert_2
    lambda: |-
      if ((id(rack_2_device_6).state == true && id(device_6_set_17_32) == 1) || 
          (id(rack_2_device_6).state == false && id(device_6_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_6");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_6");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_6
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 5
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_7
    id: device_7_invert_2
    lambda: |-
      if ((id(rack_2_device_7).state == true && id(device_7_set_17_32) == 1) || 
          (id(rack_2_device_7).state == false && id(device_7_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_7");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_7");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_7
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 6
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_8
    id: device_8_invert_2
    lambda: |-
      if ((id(rack_2_device_8).state == true && id(device_8_set_17_32) == 1) || 
          (id(rack_2_device_8).state == false && id(device_8_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_8");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_8");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_8
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 7
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_9
    id: device_9_invert_2
    lambda: |-
      if ((id(rack_2_device_9).state == true && id(device_9_set_17_32) == 1) || 
          (id(rack_2_device_9).state == false && id(device_9_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_9");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_9");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_9
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 8
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_10
    id: device_10_invert_2
    lambda: |-
      if ((id(rack_2_device_10).state == true && id(device_10_set_17_32) == 1) || 
          (id(rack_2_device_10).state == false && id(device_10_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_10");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_10");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_10
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 9
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_11
    id: device_11_invert_2
    lambda: |-
      if ((id(rack_2_device_11).state == true && id(device_11_set_17_32) == 1) || 
          (id(rack_2_device_11).state == false && id(device_11_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_11");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_11");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_11
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 10
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_12
    id: device_12_invert_2
    lambda: |-
      if ((id(rack_2_device_12).state == true && id(device_12_set_17_32) == 1) || 
          (id(rack_2_device_12).state == false && id(device_12_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_12");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_12");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_12
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 11
      mode:
        input: True
        pullup: True          
      inverted: True      
      #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_13
    id: device_13_invert_2
    lambda: |-
      if ((id(rack_2_device_13).state == true && id(device_13_set_17_32) == 1) || 
          (id(rack_2_device_13).state == false && id(device_13_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_13");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_13");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_13
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 12
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_14
    id: device_14_invert_2
    lambda: |-
      if ((id(rack_2_device_14).state == true && id(device_14_set_17_32) == 1) || 
          (id(rack_2_device_14).state == false && id(device_14_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_14");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_14");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_14
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 13
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_15
    id: device_15_invert_2
    lambda: |-
      if ((id(rack_2_device_15).state == true && id(device_15_set_17_32) == 1) || 
          (id(rack_2_device_15).state == false && id(device_15_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_15");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_15");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_15
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 14
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_2_device_16
    id: device_16_invert_2
    lambda: |-
      if ((id(rack_2_device_16).state == true && id(device_16_set_17_32) == 1) || 
          (id(rack_2_device_16).state == false && id(device_16_set_17_32) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_16");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_2_device_16");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_2_device_16
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_2
      number: 15
      mode:
        input: True
        pullup: True          
      inverted: True
  `;  
          }       
          if (selectedTypeValue1 === '16 GPIO Rack Card 3' || selectedTypeValue2 === '16 GPIO Rack Card 3' || selectedTypeValue3 === '16 GPIO Rack Card 3' || selectedTypeValue4 === '16 GPIO Rack Card 3') {
                additionalConfig += `   
  - platform: template
    name: $gpio_rack_card_3_device_1
    id: device_1_invert_3
    lambda: |-
      if ((id(rack_3_device_1).state == true && id(device_1_set_33_48) == 1) || 
          (id(rack_3_device_1).state == false && id(device_1_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_1");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_1");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_1
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 0
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_2
    id: device_2_invert_3
    lambda: |-
      if ((id(rack_3_device_2).state == true && id(device_2_set_33_48) == 1) || 
          (id(rack_3_device_2).state == false && id(device_2_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_2");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_2");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_2
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 1
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_3
    id: device_3_invert_3
    lambda: |-
      if ((id(rack_3_device_3).state == true && id(device_3_set_33_48) == 1) || 
          (id(rack_3_device_3).state == false && id(device_3_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_3");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_3");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_3
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 2
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_4
    id: device_4_invert_3
    lambda: |-
      if ((id(rack_3_device_4).state == true && id(device_4_set_33_48) == 1) || 
          (id(rack_3_device_4).state == false && id(device_4_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_4");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_4");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_4
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 3
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_5
    id: device_5_invert_3
    lambda: |-
      if ((id(rack_3_device_5).state == true && id(device_5_set_33_48) == 1) || 
          (id(rack_3_device_5).state == false && id(device_5_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_5");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_5");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_5
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 4
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_6
    id: device_6_invert_3
    lambda: |-
      if ((id(rack_3_device_6).state == true && id(device_6_set_33_48) == 1) || 
          (id(rack_3_device_6).state == false && id(device_6_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_6");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_6");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_6
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 5
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_7
    id: device_7_invert_3
    lambda: |-
      if ((id(rack_3_device_7).state == true && id(device_7_set_33_48) == 1) || 
          (id(rack_3_device_7).state == false && id(device_7_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_7");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_7");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_7
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 6
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_8
    id: device_8_invert_3
    lambda: |-
      if ((id(rack_3_device_8).state == true && id(device_8_set_33_48) == 1) || 
          (id(rack_3_device_8).state == false && id(device_8_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_8");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_8");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_8
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 7
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_9
    id: device_9_invert_3
    lambda: |-
      if ((id(rack_3_device_9).state == true && id(device_9_set_33_48) == 1) || 
          (id(rack_3_device_9).state == false && id(device_9_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_9");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_9");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_9
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 8
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_10
    id: device_10_invert_3
    lambda: |-
      if ((id(rack_3_device_10).state == true && id(device_10_set_33_48) == 1) || 
          (id(rack_3_device_10).state == false && id(device_10_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_10");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_10");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_10
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 9
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_11
    id: device_11_invert_3
    lambda: |-
      if ((id(rack_3_device_11).state == true && id(device_11_set_33_48) == 1) || 
          (id(rack_3_device_11).state == false && id(device_11_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_11");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_11");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_11
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 10
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_12
    id: device_12_invert_3
    lambda: |-
      if ((id(rack_3_device_12).state == true && id(device_12_set_33_48) == 1) || 
          (id(rack_3_device_12).state == false && id(device_12_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_12");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_12");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_12
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 11
      mode:
        input: True
        pullup: True          
      inverted: True      
      #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_13
    id: device_13_invert_3
    lambda: |-
      if ((id(rack_3_device_13).state == true && id(device_13_set_33_48) == 1) || 
          (id(rack_3_device_13).state == false && id(device_13_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_13");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_13");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_13
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 12
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_14
    id: device_14_invert_3
    lambda: |-
      if ((id(rack_3_device_14).state == true && id(device_14_set_33_48) == 1) || 
          (id(rack_3_device_14).state == false && id(device_14_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_14");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_14");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_14
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 13
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_15
    id: device_15_invert_3
    lambda: |-
      if ((id(rack_3_device_15).state == true && id(device_15_set_33_48) == 1) || 
          (id(rack_3_device_15).state == false && id(device_15_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_15");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_15");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_15
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 14
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_3_device_16
    id: device_16_invert_3
    lambda: |-
      if ((id(rack_3_device_16).state == true && id(device_16_set_33_48) == 1) || 
          (id(rack_3_device_16).state == false && id(device_16_set_33_48) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_16");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_3_device_16");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_3_device_16
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_3
      number: 15
      mode:
        input: True
        pullup: True          
      inverted: True
         `;  
          }           
          if (selectedTypeValue1 === '16 GPIO Rack Card 4' || selectedTypeValue2 === '16 GPIO Rack Card 4' || selectedTypeValue3 === '16 GPIO Rack Card 4' || selectedTypeValue4 === '16 GPIO Rack Card 4') {
                additionalConfig += `   
  - platform: template
    name: $gpio_rack_card_4_device_1
    id: device_1_invert_4
    lambda: |-
      if ((id(rack_4_device_1).state == true && id(device_1_set_49_64) == 1) || 
          (id(rack_4_device_1).state == false && id(device_1_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_1");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_1");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_1
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 0
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_2
    id: device_2_invert_4
    lambda: |-
      if ((id(rack_4_device_2).state == true && id(device_2_set_49_64) == 1) || 
          (id(rack_4_device_2).state == false && id(device_2_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_2");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_2");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_2
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 1
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_3
    id: device_3_invert_4
    lambda: |-
      if ((id(rack_4_device_3).state == true && id(device_3_set_49_64) == 1) || 
          (id(rack_4_device_3).state == false && id(device_3_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_3");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_3");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_3
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 2
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_4
    id: device_4_invert_4
    lambda: |-
      if ((id(rack_4_device_4).state == true && id(device_4_set_49_64) == 1) || 
          (id(rack_4_device_4).state == false && id(device_4_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_4");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_4");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_4
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 3
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_5
    id: device_5_invert_4
    lambda: |-
      if ((id(rack_4_device_5).state == true && id(device_5_set_49_64) == 1) || 
          (id(rack_4_device_5).state == false && id(device_5_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_5");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_5");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_5
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 4
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_6
    id: device_6_invert_4
    lambda: |-
      if ((id(rack_4_device_6).state == true && id(device_6_set_49_64) == 1) || 
          (id(rack_4_device_6).state == false && id(device_6_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_6");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_6");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_6
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 5
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_7
    id: device_7_invert_4
    lambda: |-
      if ((id(rack_4_device_7).state == true && id(device_7_set_49_64) == 1) || 
          (id(rack_4_device_7).state == false && id(device_7_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_7");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_7");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_7
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 6
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_8
    id: device_8_invert_4
    lambda: |-
      if ((id(rack_4_device_8).state == true && id(device_8_set_49_64) == 1) || 
          (id(rack_4_device_8).state == false && id(device_8_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_8");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_8");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_8
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 7
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_9
    id: device_9_invert_4
    lambda: |-
      if ((id(rack_4_device_9).state == true && id(device_9_set_49_64) == 1) || 
          (id(rack_4_device_9).state == false && id(device_9_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_9");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_9");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_9
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 8
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_10
    id: device_10_invert_4
    lambda: |-
      if ((id(rack_4_device_10).state == true && id(device_10_set_49_64) == 1) || 
          (id(rack_4_device_10).state == false && id(device_10_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_10");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_10");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_10
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 9
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_11
    id: device_11_invert_4
    lambda: |-
      if ((id(rack_4_device_11).state == true && id(device_11_set_49_64) == 1) || 
          (id(rack_4_device_11).state == false && id(device_11_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_11");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_11");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_11
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 10
      mode:
        input: True
        pullup: True          
      inverted: True
  #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_12
    id: device_12_invert_4
    lambda: |-
      if ((id(rack_4_device_12).state == true && id(device_12_set_49_64) == 1) || 
          (id(rack_4_device_12).state == false && id(device_12_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_12");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_12");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_12
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 11
      mode:
        input: True
        pullup: True          
      inverted: True      
      #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_13
    id: device_13_invert_4
    lambda: |-
      if ((id(rack_4_device_13).state == true && id(device_13_set_49_64) == 1) || 
          (id(rack_4_device_13).state == false && id(device_13_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_13");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_13");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_13
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 12
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_14
    id: device_14_invert_4
    lambda: |-
      if ((id(rack_4_device_14).state == true && id(device_14_set_49_64) == 1) || 
          (id(rack_4_device_14).state == false && id(device_14_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_14");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_14");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_14
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 13
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_15
    id: device_15_invert_4
    lambda: |-
      if ((id(rack_4_device_15).state == true && id(device_15_set_49_64) == 1) || 
          (id(rack_4_device_15).state == false && id(device_15_set_49_64) == 2))
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_15");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_15");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_15
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 14
      mode:
        input: True
        pullup: True          
      inverted: True
      #########################################################################
  - platform: template
    name: $gpio_rack_card_4_device_16
    id: device_16_invert_4
    lambda: |-
      if ((id(rack_4_device_16).state == true && id(device_16_set_49_64) == 1) || 
          (id(rack_4_device_16).state == false && id(device_16_set_49_64) == 2))   
      {
        return true;
      } else {
        return false;
      }
    on_press:
      then: 
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_16");
            id(last_state_pressed).publish_state("ON");         
    on_release:
      then:   
        - delay: 500ms
        - lambda: |-
            id(last_name_pressed).publish_state("$gpio_rack_card_4_device_16");
            id(last_state_pressed).publish_state("OFF");  
  - platform: gpio
    id: rack_4_device_16
    pin:
      mcp23xxx: mcp23017_hub_16_gpio_rack_card_4
      number: 15
      mode:
        input: True
        pullup: True          
      inverted: True
  `;  
          }                                               
//////////////////////////  BUTTON   //////////////////////
          additionalConfig += `
button:
  - platform: template
    name: button placeholder
    internal: true   `;        
            if (selectedTypeValue1 === '16 GPIO Rack Card 1' || selectedTypeValue2 === '16 GPIO Rack Card 1' || selectedTypeValue3 === '16 GPIO Rack Card 1' || selectedTypeValue4 === '16 GPIO Rack Card 1') {
                additionalConfig += `   
  - platform: template
    name: Reset All GPIO to NO (1-16)
    icon: "mdi:alert"
    on_press:
      - lambda: |-
            id(device_1_set_1_16) = 1;
            id(device_2_set_1_16) = 1;
            id(device_3_set_1_16) = 1;
            id(device_4_set_1_16) = 1;
            id(device_5_set_1_16) = 1;
            id(device_6_set_1_16) = 1;
            id(device_7_set_1_16) = 1;
            id(device_8_set_1_16) = 1;
            id(device_9_set_1_16) = 1;
            id(device_10_set_1_16) = 1;
            id(device_11_set_1_16) = 1;
            id(device_12_set_1_16) = 1;
            id(device_13_set_1_16) = 1;
            id(device_14_set_1_16) = 1;
            id(device_15_set_1_16) = 1;
            id(device_16_set_1_16) = 1;

  - platform: template
    name: GPIO State Set (NO\NC 1-16)
    icon: "mdi:set-merge"
    on_press:
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "GPIO 1") {
            id(device_1_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "GPIO 1") {
            id(device_1_set_1_16) = 2;
          }
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "GPIO 2") {
            id(device_2_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "GPIO 2") {
            id(device_2_set_1_16) = 2;
          }          
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "GPIO 3") {
            id(device_3_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "GPIO 3") {
            id(device_3_set_1_16) = 2;
          }
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "GPIO 4") {
            id(device_4_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "GPIO 4") {
            id(device_4_set_1_16) = 2;
          }  
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "GPIO 5") {
            id(device_5_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "GPIO 5") {
            id(device_5_set_1_16) = 2;
          }
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "GPIO 6") {
            id(device_6_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "GPIO 6") {
            id(device_6_set_1_16) = 2;
          }          
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "GPIO 7") {
            id(device_7_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "GPIO 7") {
            id(device_7_set_1_16) = 2;
          }
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "GPIO 8") {
            id(device_8_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "GPIO 8") {
            id(device_8_set_1_16) = 2;
          }  
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "GPIO 9") {
            id(device_9_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "GPIO 9") {
            id(device_9_set_1_16) = 2;
          }
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "GPIO 10") {
            id(device_10_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "GPIO 10") {
            id(device_10_set_1_16) = 2;
          }          
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "GPIO 11") {
            id(device_11_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "GPIO 11") {
            id(device_11_set_1_16) = 2;
          }
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "GPIO 12") {
            id(device_12_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "GPIO 12") {
            id(device_12_set_1_16) = 2;
          }  
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "GPIO 13") {
            id(device_13_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "GPIO 13") {
            id(device_13_set_1_16) = 2;
          }
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "GPIO 14") {
            id(device_14_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "GPIO 14") {
            id(device_14_set_1_16) = 2;
          }          
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "GPIO 15") {
            id(device_15_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "GPIO 15") {
            id(device_15_set_1_16) = 2;
          }
      - lambda: |-
          if (id(device_select_1).state == "NO" && id(select_gpio_1).state == "GPIO 16") {
            id(device_16_set_1_16) = 1;
          } 
      - lambda: |-
          if (id(device_select_1).state == "NC" && id(select_gpio_1).state == "GPIO 16") {
            id(device_16_set_1_16) = 2;
          }  
      - select.set:
          id: select_gpio_1
          option: "None" 
          `;  
          }    
          if (selectedTypeValue1 === '16 GPIO Rack Card 2' || selectedTypeValue2 === '16 GPIO Rack Card 2' || selectedTypeValue3 === '16 GPIO Rack Card 2' || selectedTypeValue4 === '16 GPIO Rack Card 2') {
          additionalConfig += `   
  - platform: template
    name: Reset All GPIO to NO (17-32)
    icon: "mdi:alert"
    on_press:
      - lambda: |-
            id(device_1_set_17_32) = 1;
            id(device_2_set_17_32) = 1;
            id(device_3_set_17_32) = 1;
            id(device_4_set_17_32) = 1;
            id(device_5_set_17_32) = 1;
            id(device_6_set_17_32) = 1;
            id(device_7_set_17_32) = 1;
            id(device_8_set_17_32) = 1;
            id(device_9_set_17_32) = 1;
            id(device_10_set_17_32) = 1;
            id(device_11_set_17_32) = 1;
            id(device_12_set_17_32) = 1;
            id(device_13_set_17_32) = 1;
            id(device_14_set_17_32) = 1;
            id(device_15_set_17_32) = 1;
            id(device_16_set_17_32) = 1;

  - platform: template
    name: GPIO State Set (NO\NC 17-32)
    icon: "mdi:set-merge"
    on_press:
      - lambda: |-
          if (id(device_select_2).state == "NO" && id(select_gpio_2).state == "GPIO 17") {
            id(device_1_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_2).state == "NC" && id(select_gpio_2).state == "GPIO 17") {
            id(device_1_set_17_32) = 2;
          }
      - lambda: |-
          if (id(device_select_2).state == "NO" && id(select_gpio_2).state == "GPIO 18") {
            id(device_2_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_2).state == "NC" && id(select_gpio_2).state == "GPIO 18") {
            id(device_2_set_17_32) = 2;
          }          
      - lambda: |-
          if (id(device_select_2).state == "NO" && id(select_gpio_2).state == "GPIO 19") {
            id(device_3_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_2).state == "NC" && id(select_gpio_2).state == "GPIO 19") {
            id(device_3_set_17_32) = 2;
          }
      - lambda: |-
          if (id(device_select_2).state == "NO" && id(select_gpio_2).state == "GPIO 20") {
            id(device_4_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_2).state == "NC" && id(select_gpio_2).state == "GPIO 20") {
            id(device_4_set_17_32) = 2;
          }  
      - lambda: |-
          if (id(device_select_2).state == "NO" && id(select_gpio_2).state == "GPIO 21") {
            id(device_5_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_2).state == "NC" && id(select_gpio_2).state == "GPIO 21") {
            id(device_5_set_17_32) = 2;
          }
      - lambda: |-
          if (id(device_select_2).state == "NO" && id(select_gpio_2).state == "GPIO 22") {
            id(device_6_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_2).state == "NC" && id(select_gpio_2).state == "GPIO 22") {
            id(device_6_set_17_32) = 2;
          }          
      - lambda: |-
          if (id(device_select_2).state == "NO" && id(select_gpio_2).state == "GPIO 23") {
            id(device_7_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_2).state == "NC" && id(select_gpio_2).state == "GPIO 23") {
            id(device_7_set_17_32) = 2;
          }
      - lambda: |-
          if (id(device_select_2).state == "NO" && id(select_gpio_2).state == "GPIO 24") {
            id(device_8_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_2).state == "NC" && id(select_gpio_2).state == "GPIO 24") {
            id(device_8_set_17_32) = 2;
          }  
      - lambda: |-
          if (id(device_select_2).state == "NO" && id(select_gpio_2).state == "GPIO 25") {
            id(device_9_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_2).state == "NC" && id(select_gpio_2).state == "GPIO 25") {
            id(device_9_set_17_32) = 2;
          }
      - lambda: |-
          if (id(device_select_2).state == "NO" && id(select_gpio_2).state == "GPIO 26") {
            id(device_10_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_2).state == "NC" && id(select_gpio_2).state == "GPIO 26") {
            id(device_10_set_17_32) = 2;
          }          
      - lambda: |-
          if (id(device_select_2).state == "NO" && id(select_gpio_2).state == "GPIO 27") {
            id(device_11_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_2).state == "NC" && id(select_gpio_2).state == "GPIO 27") {
            id(device_11_set_17_32) = 2;
          }
      - lambda: |-
          if (id(device_select_2).state == "NO" && id(select_gpio_2).state == "GPIO 28") {
            id(device_12_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_2).state == "NC" && id(select_gpio_2).state == "GPIO 28") {
            id(device_12_set_17_32) = 2;
          }  
      - lambda: |-
          if (id(device_select_2).state == "NO" && id(select_gpio_2).state == "GPIO 29") {
            id(device_13_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_2).state == "NC" && id(select_gpio_2).state == "GPIO 29") {
            id(device_13_set_17_32) = 2;
          }
      - lambda: |-
          if (id(device_select_2).state == "NO" && id(select_gpio_2).state == "GPIO 30") {
            id(device_14_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_2).state == "NC" && id(select_gpio_2).state == "GPIO 30") {
            id(device_14_set_17_32) = 2;
          }          
      - lambda: |-
          if (id(device_select_2).state == "NO" && id(select_gpio_2).state == "GPIO 31") {
            id(device_15_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_2).state == "NC" && id(select_gpio_2).state == "GPIO 31") {
            id(device_15_set_17_32) = 2;
          }
      - lambda: |-
          if (id(device_select_2).state == "NO" && id(select_gpio_2).state == "GPIO 32") {
            id(device_16_set_17_32) = 1;
          } 
      - lambda: |-
          if (id(device_select_2).state == "NC" && id(select_gpio_2).state == "GPIO 32") {
            id(device_16_set_17_32) = 2;
          }  
      - select.set:
          id: select_gpio_2
          option: "None" 

          `;    
        }                
        if (selectedTypeValue1 === '16 GPIO Rack Card 3' || selectedTypeValue2 === '16 GPIO Rack Card 3' || selectedTypeValue3 === '16 GPIO Rack Card 3' || selectedTypeValue4 === '16 GPIO Rack Card 3') {
                additionalConfig += `   
  - platform: template
    name: Reset All GPIO to NO (33-48)
    icon: "mdi:alert"
    on_press:
      - lambda: |-
            id(device_1_set_33_48) = 1;
            id(device_2_set_33_48) = 1;
            id(device_3_set_33_48) = 1;
            id(device_4_set_33_48) = 1;
            id(device_5_set_33_48) = 1;
            id(device_6_set_33_48) = 1;
            id(device_7_set_33_48) = 1;
            id(device_8_set_33_48) = 1;
            id(device_9_set_33_48) = 1;
            id(device_10_set_33_48) = 1;
            id(device_11_set_33_48) = 1;
            id(device_12_set_33_48) = 1;
            id(device_13_set_33_48) = 1;
            id(device_14_set_33_48) = 1;
            id(device_15_set_33_48) = 1;
            id(device_16_set_33_48) = 1;

  - platform: template
    name: GPIO State Set (NO-NC 33-48)
    icon: "mdi:set-merge"
    on_press:
      - lambda: |-
          if (id(device_select_3).state == "NO" && id(select_gpio_3).state == "GPIO 33") {
            id(device_1_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_3).state == "NC" && id(select_gpio_3).state == "GPIO 33") {
            id(device_1_set_33_48) = 2;
          }
      - lambda: |-
          if (id(device_select_3).state == "NO" && id(select_gpio_3).state == "GPIO 34") {
            id(device_2_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_3).state == "NC" && id(select_gpio_3).state == "GPIO 34") {
            id(device_2_set_33_48) = 2;
          }          
      - lambda: |-
          if (id(device_select_3).state == "NO" && id(select_gpio_3).state == "GPIO 35") {
            id(device_3_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_3).state == "NC" && id(select_gpio_3).state == "GPIO 35") {
            id(device_3_set_33_48) = 2;
          }
      - lambda: |-
          if (id(device_select_3).state == "NO" && id(select_gpio_3).state == "GPIO 36") {
            id(device_4_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_3).state == "NC" && id(select_gpio_3).state == "GPIO 36") {
            id(device_4_set_33_48) = 2;
          }  
      - lambda: |-
          if (id(device_select_3).state == "NO" && id(select_gpio_3).state == "GPIO 37") {
            id(device_5_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_3).state == "NC" && id(select_gpio_3).state == "GPIO 37") {
            id(device_5_set_33_48) = 2;
          }
      - lambda: |-
          if (id(device_select_3).state == "NO" && id(select_gpio_3).state == "GPIO 38") {
            id(device_6_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_3).state == "NC" && id(select_gpio_3).state == "GPIO 38") {
            id(device_6_set_33_48) = 2;
          }          
      - lambda: |-
          if (id(device_select_3).state == "NO" && id(select_gpio_3).state == "GPIO 39") {
            id(device_7_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_3).state == "NC" && id(select_gpio_3).state == "GPIO 39") {
            id(device_7_set_33_48) = 2;
          }
      - lambda: |-
          if (id(device_select_3).state == "NO" && id(select_gpio_3).state == "GPIO 40") {
            id(device_8_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_3).state == "NC" && id(select_gpio_3).state == "GPIO 40") {
            id(device_8_set_33_48) = 2;
          }  
      - lambda: |-
          if (id(device_select_3).state == "NO" && id(select_gpio_3).state == "GPIO 41") {
            id(device_9_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_3).state == "NC" && id(select_gpio_3).state == "GPIO 41") {
            id(device_9_set_33_48) = 2;
          }
      - lambda: |-
          if (id(device_select_3).state == "NO" && id(select_gpio_3).state == "GPIO 42") {
            id(device_10_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_3).state == "NC" && id(select_gpio_3).state == "GPIO 42") {
            id(device_10_set_33_48) = 2;
          }          
      - lambda: |-
          if (id(device_select_3).state == "NO" && id(select_gpio_3).state == "GPIO 43") {
            id(device_11_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_3).state == "NC" && id(select_gpio_3).state == "GPIO 43") {
            id(device_11_set_33_48) = 2;
          }
      - lambda: |-
          if (id(device_select_3).state == "NO" && id(select_gpio_3).state == "GPIO 44") {
            id(device_12_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_3).state == "NC" && id(select_gpio_3).state == "GPIO 44") {
            id(device_12_set_33_48) = 2;
          }  
      - lambda: |-
          if (id(device_select_3).state == "NO" && id(select_gpio_3).state == "GPIO 45") {
            id(device_13_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_3).state == "NC" && id(select_gpio_3).state == "GPIO 45") {
            id(device_13_set_33_48) = 2;
          }
      - lambda: |-
          if (id(device_select_3).state == "NO" && id(select_gpio_3).state == "GPIO 46") {
            id(device_14_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_3).state == "NC" && id(select_gpio_3).state == "GPIO 46") {
            id(device_14_set_33_48) = 2;
          }          
      - lambda: |-
          if (id(device_select_3).state == "NO" && id(select_gpio_3).state == "GPIO 47") {
            id(device_15_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_3).state == "NC" && id(select_gpio_3).state == "GPIO 47") {
            id(device_15_set_33_48) = 2;
          }
      - lambda: |-
          if (id(device_select_3).state == "NO" && id(select_gpio_3).state == "GPIO 48") {
            id(device_16_set_33_48) = 1;
          } 
      - lambda: |-
          if (id(device_select_3).state == "NC" && id(select_gpio_3).state == "GPIO 48") {
            id(device_16_set_33_48) = 2;
          }  
      - select.set:
          id: select_gpio_3
          option: "None" 
          `;  
          }    
          if (selectedTypeValue1 === '16 GPIO Rack Card 4' || selectedTypeValue2 === '16 GPIO Rack Card 4' || selectedTypeValue3 === '16 GPIO Rack Card 4' || selectedTypeValue4 === '16 GPIO Rack Card 4') {
                additionalConfig += `   
  - platform: template
    name: Reset All GPIO to NO (49-64)
    icon: "mdi:alert"
    on_press:
      - lambda: |-
            id(device_1_set_49_64) = 1;
            id(device_2_set_49_64) = 1;
            id(device_3_set_49_64) = 1;
            id(device_4_set_49_64) = 1;
            id(device_5_set_49_64) = 1;
            id(device_6_set_49_64) = 1;
            id(device_7_set_49_64) = 1;
            id(device_8_set_49_64) = 1;
            id(device_9_set_49_64) = 1;
            id(device_10_set_49_64) = 1;
            id(device_11_set_49_64) = 1;
            id(device_12_set_49_64) = 1;
            id(device_13_set_49_64) = 1;
            id(device_14_set_49_64) = 1;
            id(device_15_set_49_64) = 1;
            id(device_16_set_49_64) = 1;

  - platform: template
    name: GPIO State Set (NO\NC 49-64)
    icon: "mdi:set-merge"
    on_press:
      - lambda: |-
          if (id(device_select_4).state == "NO" && id(select_gpio_4).state == "GPIO 49") {
            id(device_1_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_4).state == "NC" && id(select_gpio_4).state == "GPIO 49") {
            id(device_1_set_49_64) = 2;
          }
      - lambda: |-
          if (id(device_select_4).state == "NO" && id(select_gpio_4).state == "GPIO 50") {
            id(device_2_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_4).state == "NC" && id(select_gpio_4).state == "GPIO 50") {
            id(device_2_set_49_64) = 2;
          }          
      - lambda: |-
          if (id(device_select_4).state == "NO" && id(select_gpio_4).state == "GPIO 51") {
            id(device_3_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_4).state == "NC" && id(select_gpio_4).state == "GPIO 51") {
            id(device_3_set_49_64) = 2;
          }
      - lambda: |-
          if (id(device_select_4).state == "NO" && id(select_gpio_4).state == "GPIO 52") {
            id(device_4_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_4).state == "NC" && id(select_gpio_4).state == "GPIO 52") {
            id(device_4_set_49_64) = 2;
          }  
      - lambda: |-
          if (id(device_select_4).state == "NO" && id(select_gpio_4).state == "GPIO 53") {
            id(device_5_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_4).state == "NC" && id(select_gpio_4).state == "GPIO 53") {
            id(device_5_set_49_64) = 2;
          }
      - lambda: |-
          if (id(device_select_4).state == "NO" && id(select_gpio_4).state == "GPIO 54") {
            id(device_6_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_4).state == "NC" && id(select_gpio_4).state == "GPIO 54") {
            id(device_6_set_49_64) = 2;
          }          
      - lambda: |-
          if (id(device_select_4).state == "NO" && id(select_gpio_4).state == "GPIO 55") {
            id(device_7_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_4).state == "NC" && id(select_gpio_4).state == "GPIO 55") {
            id(device_7_set_49_64) = 2;
          }
      - lambda: |-
          if (id(device_select_4).state == "NO" && id(select_gpio_4).state == "GPIO 56") {
            id(device_8_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_4).state == "NC" && id(select_gpio_4).state == "GPIO 56") {
            id(device_8_set_49_64) = 2;
          }  
      - lambda: |-
          if (id(device_select_4).state == "NO" && id(select_gpio_4).state == "GPIO 57") {
            id(device_9_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_4).state == "NC" && id(select_gpio_4).state == "GPIO 57") {
            id(device_9_set_49_64) = 2;
          }
      - lambda: |-
          if (id(device_select_4).state == "NO" && id(select_gpio_4).state == "GPIO 58") {
            id(device_10_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_4).state == "NC" && id(select_gpio_4).state == "GPIO 58") {
            id(device_10_set_49_64) = 2;
          }          
      - lambda: |-
          if (id(device_select_4).state == "NO" && id(select_gpio_4).state == "GPIO 59") {
            id(device_11_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_4).state == "NC" && id(select_gpio_4).state == "GPIO 59") {
            id(device_11_set_49_64) = 2;
          }
      - lambda: |-
          if (id(device_select_4).state == "NO" && id(select_gpio_4).state == "GPIO 60") {
            id(device_12_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_4).state == "NC" && id(select_gpio_4).state == "GPIO 60") {
            id(device_12_set_49_64) = 2;
          }  
      - lambda: |-
          if (id(device_select_4).state == "NO" && id(select_gpio_4).state == "GPIO 61") {
            id(device_13_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_4).state == "NC" && id(select_gpio_4).state == "GPIO 61") {
            id(device_13_set_49_64) = 2;
          }
      - lambda: |-
          if (id(device_select_4).state == "NO" && id(select_gpio_4).state == "GPIO 62") {
            id(device_14_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_4).state == "NC" && id(select_gpio_4).state == "GPIO 62") {
            id(device_14_set_49_64) = 2;
          }          
      - lambda: |-
          if (id(device_select_4).state == "NO" && id(select_gpio_4).state == "GPIO 63") {
            id(device_15_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_4).state == "NC" && id(select_gpio_4).state == "GPIO 63") {
            id(device_15_set_49_64) = 2;
          }
      - lambda: |-
          if (id(device_select_4).state == "NO" && id(select_gpio_4).state == "GPIO 64") {
            id(device_16_set_49_64) = 1;
          } 
      - lambda: |-
          if (id(device_select_4).state == "NC" && id(select_gpio_4).state == "GPIO 64") {
            id(device_16_set_49_64) = 2;
          }  
      - select.set:
          id: select_gpio_4
          option: "None" 
          `;  
          }    
          
//////////////////////////  SELECET   //////////////////////
            additionalConfig += `
select:
  - platform: template
    id: select_placeholder
    optimistic: true
    initial_option: "None"
    internal: true 
    options:
      - "None"
    
`;        
              if (selectedTypeValue1 === '16 GPIO Rack Card 1' || selectedTypeValue2 === '16 GPIO Rack Card 1' || selectedTypeValue3 === '16 GPIO Rack Card 1' || selectedTypeValue4 === '16 GPIO Rack Card 1') {
                  additionalConfig += `    
  - platform: template
    name: Select GPIO (1-16)
    id: select_gpio_1
    optimistic: true
    initial_option: "None"
    options:
      - "None"
      - "GPIO 1"
      - "GPIO 2"
      - "GPIO 3"
      - "GPIO 4"  
      - "GPIO 5"
      - "GPIO 6"
      - "GPIO 7"
      - "GPIO 8"  
      - "GPIO 9"
      - "GPIO 10"
      - "GPIO 11"
      - "GPIO 12"  
      - "GPIO 13"
      - "GPIO 14"
      - "GPIO 15"
      - "GPIO 16"     

  - platform: template
    name: GPIO NO\NC (1-16)
    id: device_select_1
    optimistic: true
    initial_option: "NO"
    options:
      - "NO"
      - "NC"      
      `;  
          }    
          if (selectedTypeValue1 === '16 GPIO Rack Card 2' || selectedTypeValue2 === '16 GPIO Rack Card 2' || selectedTypeValue3 === '16 GPIO Rack Card 2' || selectedTypeValue4 === '16 GPIO Rack Card 2') {
                  additionalConfig += `    
  - platform: template
    name: Select GPIO (17-32)
    id: select_gpio_2
    optimistic: true
    initial_option: "None"
    options:
      - "None"
      - "GPIO 17"
      - "GPIO 18"
      - "GPIO 19"
      - "GPIO 20"  
      - "GPIO 21"
      - "GPIO 22"
      - "GPIO 23"
      - "GPIO 24"  
      - "GPIO 25"
      - "GPIO 26"
      - "GPIO 27"
      - "GPIO 28"  
      - "GPIO 29"
      - "GPIO 30"
      - "GPIO 31"
      - "GPIO 32"     

  - platform: template
    name: GPIO NO\NC (17-32)
    id: device_select_2
    optimistic: true
    initial_option: "NO"
    options:
      - "NO"
      - "NC"      
      `;  
          } 
          if (selectedTypeValue1 === '16 GPIO Rack Card 3' || selectedTypeValue2 === '16 GPIO Rack Card 3' || selectedTypeValue3 === '16 GPIO Rack Card 3' || selectedTypeValue4 === '16 GPIO Rack Card 3') {
                  additionalConfig += `    
  - platform: template
    name: Select GPIO (33-48)
    id: select_gpio_3
    optimistic: true
    initial_option: "None"
    options:
      - "None"
      - "GPIO 33"
      - "GPIO 34"
      - "GPIO 35"
      - "GPIO 36"  
      - "GPIO 37"
      - "GPIO 38"
      - "GPIO 39"
      - "GPIO 40"  
      - "GPIO 41"
      - "GPIO 42"
      - "GPIO 43"
      - "GPIO 44"  
      - "GPIO 45"
      - "GPIO 46"
      - "GPIO 47"
      - "GPIO 48"     

  - platform: template
    name: GPIO NO\NC (33-48)
    id: device_select_3
    optimistic: true
    initial_option: "NO"
    options:
      - "NO"
      - "NC"      
      `;  
          }   
          if (selectedTypeValue1 === '16 GPIO Rack Card 4' || selectedTypeValue2 === '16 GPIO Rack Card 4' || selectedTypeValue3 === '16 GPIO Rack Card 4' || selectedTypeValue4 === '16 GPIO Rack Card 4') {
                  additionalConfig += `    
  - platform: template
    name: Select GPIO (49-64)
    id: select_gpio_4
    optimistic: true
    initial_option: "None"
    options:
      - "None"
      - "GPIO 49"
      - "GPIO 50"
      - "GPIO 51"
      - "GPIO 52"  
      - "GPIO 53"
      - "GPIO 54"
      - "GPIO 55"
      - "GPIO 56"  
      - "GPIO 57"
      - "GPIO 58"
      - "GPIO 59"
      - "GPIO 60"  
      - "GPIO 61"
      - "GPIO 62"
      - "GPIO 63"
      - "GPIO 64"     

  - platform: template
    name: GPIO NO\NC (49-64)
    id: device_select_4
    optimistic: true
    initial_option: "NO"
    options:
      - "NO"
      - "NC"      
      `;  
          }    
          
//////////////////////////  GLOBALS   //////////////////////
            additionalConfig += `
globals: 
  - id: global_placeholder
    type: float
    restore_value: no`;        
              if (selectedTypeValue1 === '16 GPIO Rack Card 1' || selectedTypeValue2 === '16 GPIO Rack Card 1' || selectedTypeValue3 === '16 GPIO Rack Card 1' || selectedTypeValue4 === '16 GPIO Rack Card 1') {
                  additionalConfig += `    
  - id: device_1_set_1_16
    type: float
    restore_value: yes
  - id: device_2_set_1_16
    type: float
    restore_value: yes
  - id: device_3_set_1_16
    type: float
    restore_value: yes
  - id: device_4_set_1_16
    type: float
    restore_value: yes
  - id: device_5_set_1_16
    type: float
    restore_value: yes
  - id: device_6_set_1_16
    type: float
    restore_value: yes
  - id: device_7_set_1_16
    type: float
    restore_value: yes
  - id: device_8_set_1_16
    type: float
    restore_value: yes
  - id: device_9_set_1_16
    type: float
    restore_value: yes
  - id: device_10_set_1_16
    type: float
    restore_value: yes
  - id: device_11_set_1_16
    type: float
    restore_value: yes
  - id: device_12_set_1_16
    type: float
    restore_value: yes
  - id: device_13_set_1_16
    type: float
    restore_value: yes
  - id: device_14_set_1_16
    type: float
    restore_value: yes
  - id: device_15_set_1_16
    type: float
    restore_value: yes
  - id: device_16_set_1_16
    type: float
    restore_value: yes 
  `;  
          }    
          if (selectedTypeValue1 === '16 GPIO Rack Card 2' || selectedTypeValue2 === '16 GPIO Rack Card 2' || selectedTypeValue3 === '16 GPIO Rack Card 2' || selectedTypeValue4 === '16 GPIO Rack Card 2') {
                  additionalConfig += `    
  - id: device_1_set_17_32
    type: float
    restore_value: yes
  - id: device_2_set_17_32
    type: float
    restore_value: yes
  - id: device_3_set_17_32
    type: float
    restore_value: yes
  - id: device_4_set_17_32
    type: float
    restore_value: yes
  - id: device_5_set_17_32
    type: float
    restore_value: yes
  - id: device_6_set_17_32
    type: float
    restore_value: yes
  - id: device_7_set_17_32
    type: float
    restore_value: yes
  - id: device_8_set_17_32
    type: float
    restore_value: yes
  - id: device_9_set_17_32
    type: float
    restore_value: yes
  - id: device_10_set_17_32
    type: float
    restore_value: yes
  - id: device_11_set_17_32
    type: float
    restore_value: yes
  - id: device_12_set_17_32
    type: float
    restore_value: yes
  - id: device_13_set_17_32
    type: float
    restore_value: yes
  - id: device_14_set_17_32
    type: float
    restore_value: yes
  - id: device_15_set_17_32
    type: float
    restore_value: yes
  - id: device_16_set_17_32
    type: float
    restore_value: yes 
  `;  
          }  
          if (selectedTypeValue1 === '16 GPIO Rack Card 3' || selectedTypeValue2 === '16 GPIO Rack Card 3' || selectedTypeValue3 === '16 GPIO Rack Card 3' || selectedTypeValue4 === '16 GPIO Rack Card 3') {
                  additionalConfig += `    
  - id: device_1_set_33_48
    type: float
    restore_value: yes
  - id: device_2_set_33_48
    type: float
    restore_value: yes
  - id: device_3_set_33_48
    type: float
    restore_value: yes
  - id: device_4_set_33_48
    type: float
    restore_value: yes
  - id: device_5_set_33_48
    type: float
    restore_value: yes
  - id: device_6_set_33_48
    type: float
    restore_value: yes
  - id: device_7_set_33_48
    type: float
    restore_value: yes
  - id: device_8_set_33_48
    type: float
    restore_value: yes
  - id: device_9_set_33_48
    type: float
    restore_value: yes
  - id: device_10_set_33_48
    type: float
    restore_value: yes
  - id: device_11_set_33_48
    type: float
    restore_value: yes
  - id: device_12_set_33_48
    type: float
    restore_value: yes
  - id: device_13_set_33_48
    type: float
    restore_value: yes
  - id: device_14_set_33_48
    type: float
    restore_value: yes
  - id: device_15_set_33_48
    type: float
    restore_value: yes
  - id: device_16_set_33_48
    type: float
    restore_value: yes 
  `;  
          }        
          if (selectedTypeValue1 === '16 GPIO Rack Card 4' || selectedTypeValue2 === '16 GPIO Rack Card 4' || selectedTypeValue3 === '16 GPIO Rack Card 4' || selectedTypeValue4 === '16 GPIO Rack Card 4') {
                  additionalConfig += `    
  - id: device_1_set_49_64
    type: float
    restore_value: yes
  - id: device_2_set_49_64
    type: float
    restore_value: yes
  - id: device_3_set_49_64
    type: float
    restore_value: yes
  - id: device_4_set_49_64
    type: float
    restore_value: yes
  - id: device_5_set_49_64
    type: float
    restore_value: yes
  - id: device_6_set_49_64
    type: float
    restore_value: yes
  - id: device_7_set_49_64
    type: float
    restore_value: yes
  - id: device_8_set_49_64
    type: float
    restore_value: yes
  - id: device_9_set_49_64
    type: float
    restore_value: yes
  - id: device_10_set_49_64
    type: float
    restore_value: yes
  - id: device_11_set_49_64
    type: float
    restore_value: yes
  - id: device_12_set_49_64
    type: float
    restore_value: yes
  - id: device_13_set_49_64
    type: float
    restore_value: yes
  - id: device_14_set_49_64
    type: float
    restore_value: yes
  - id: device_15_set_49_64
    type: float
    restore_value: yes
  - id: device_16_set_49_64
    type: float
    restore_value: yes 
  `;  
          }                                      
////////////////////////////////////////////////////////////////////////////////////////////
          
            // Combine the two configurations
            const combinedConfig = `${yamlConfig}\n${additionalConfig}`;

            // Create a Blob and download link
            const blob = new Blob([combinedConfig], { type: 'text/plain' });
            const downloadLink = document.createElement('a');

            // Set attributes for the download link
            downloadLink.href = URL.createObjectURL(blob);
            downloadLink.download = 'rack_system_config.yaml';

            // Append the link to the body and simulate a click to trigger the download
            document.body.appendChild(downloadLink);
            downloadLink.click();

            // Remove the link from the body
            document.body.removeChild(downloadLink);
        });

        // Initial call to set the initial visibility based on the default values
        updateSubbVisibility();
    </script>
    <pre></pre>      
    <main>
      <h7>Getting started with ESPhome add-on for Home Assistant guide <a href="https://esphome.io/guides/getting_started_hassio.html" target="_blank">https://esphome.io/guides/getting_started_hassio.html</a>.</h7>
    </main> 
    <pre></pre>      
    <main>
      <h7>When ESPhome has been set up, following the steps below. </h7>
    </main>   
    <main>
      <h7>  Step 1: Click New Device and then click continue. </h7>
    </main>     
    <main>
      <h7>  Step 2: Give it a name and copy the name into the Display Name box in IHA Rack System web page. </h7>
    </main>  
    <main>
      <h7>  Step 3: Now Click Next and click on any of the ESP32 options (it will be changed later). </h7>
    </main>
    <main>
      <h7>  Step 4: Copy the Encryption key that is provided and paste it into the API Key box in IHA Rack System web page. </h7>
    </main>
    <main>
      <h7>  Step 5: Now click skip and find the new device and click edit. </h7>
    </main> 
    <main>
      <h7>  Step 6: Around the second line you should see (name:) copy the name given and past it into the ESPHome Name box in IHA Rack System web page. </h7>
    </main>   
    <main>
      <h7>  Step 7: Now go to IHA Rack System web page and select the board address and the device type. Fill out the remaing boxes. </h7>
    </main>  
    <main>
      <h7>  Step 8: Click Download YAML File. it will now download. Open the new downloaded file and select all the text and copy it.  </h7>
    </main>    
    <main>
      <h7>  Step 9: Now go back to the new device configuration page and replace all the exisitng text with the copy text.  </h7>
    </main>                
    <main>
      <h7>  Step 10: Now Click Manual download and if and when prompted, click modern format and it should give you a new downloaded Bin file.  </h7>
    </main>      
    <main>
      <h7>  Step 11: You should alrady have access to your defualt IHA Rack System Device Page. go to the update at the bottom, select the bin file that was downloaded and hit update.  </h7>
    </main> 
    <main>
      <h7>  Step 12: Steps 10 & 11 can only be done once as it adds an update password. once you completed step 11, you can now update with esphome. </h7>
    </main>                                         
</body>

</html>