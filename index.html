<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IHA Code Generation</title>
    <style>
        /* Add your CSS styles here */
        .subb,
        .subb2 {
            margin-left: 14em; /* Adjust the value as needed */
            display: none; /* Hide the divs by default */
        }

        header h1 {
            margin-left: 2em; /* Adjust the value as needed */
            color: blue; /* Set the color to blue */
        }

        #downloadButton {
            margin-left: 2em; /* Adjust the value as needed */
            background-color: green; /* Set the background color to green */
            color: white; /* Set the text color to white */
            border: none; /* Remove border for a cleaner look */
            padding: 10px 20px; /* Add padding for better appearance */
            cursor: pointer; /* Add cursor pointer for user interaction */
        }
    </style>

</head>

<body>
    <header>
        <h1>IHA Rack System V4</h1>
    </header>

    <main>
        <label for="dropdown1">Node Device 1 Address:</label>
        <select id="dropdown1">
            <option value="none">None</option>
            <option value="0x20">0x20</option>
            <option value="0x21">0x21</option>
            <option value="0x22">0x22</option>
            <option value="0x23">0x23</option>
            <option value="0x24">0x24</option>
            <option value="0x25">0x25</option>
            <option value="0x26">0x26</option>
            <option value="0x27">0x27</option>
            <!-- Add more options for Node Device 1 as needed -->
        </select>
    </main>
    <div class="subb">
        <label for="type1">Node Device 1 Type:</label>
        <select id="type1">
            <option value="none">none</option>
            <option value="16 GPIO Rack Card 1">16 GPIO Rack Card 1</option>
            <option value="16 GPIO Rack Card 2">16 GPIO Rack Card 2</option>
            <option value="16 GPIO Rack Card 3">16 GPIO Rack Card 3</option>
            <option value="16 GPIO Rack Card 4">16 GPIO Rack Card 4</option>
            <option value="Button Controller">Button Controller</option>
            <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
            <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
            <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
            <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
            <!-- Add more options for Node Device Type 1 as needed -->
        </select>
    </div>
    <main>
        <label for="dropdown2">Node Device 2 Address:</label>
        <select id="dropdown2">
            <option value="none">None</option>
            <option value="0x20">0x20</option>
            <option value="0x21">0x21</option>
            <option value="0x22">0x22</option>
            <option value="0x23">0x23</option>
            <option value="0x24">0x24</option>
            <option value="0x25">0x25</option>
            <option value="0x26">0x26</option>
            <option value="0x27">0x27</option>
            <!-- Add more options for Node Device 2 as needed -->
        </select>
    </main>
    <div class="subb2">
        <label for="type2">Node Device 2 Type:</label>
        <select id="type2">
            <option value="none">none</option>
            <option value="16 GPIO Rack Card 1">16 GPIO Rack Card 1</option>
            <option value="16 GPIO Rack Card 2">16 GPIO Rack Card 2</option>
            <option value="16 GPIO Rack Card 3">16 GPIO Rack Card 3</option>
            <option value="16 GPIO Rack Card 4">16 GPIO Rack Card 4</option>
            <option value="Button Controller">Button Controller</option>
            <option value="8 Port Relay Board 1">8 Port Relay Board 1</option>
            <option value="8 Port Relay Board 2">8 Port Relay Board 2</option>
            <option value="8 Port Relay Board 3">8 Port Relay Board 3</option>
            <option value="8 Port Relay Board 4">8 Port Relay Board 4</option>
            <!-- Add more options for Node Device Type 2 as needed -->
        </select>
    </div>
    <!-- Add 6 text entry boxes -->
    <div>
        <label for="textEntry1">Text Entry 1:</label>
        <input type="text" id="textEntry1">
    </div>
    <div>
        <label for="textEntry2">Text Entry 2:</label>
        <input type="text" id="textEntry2">
    </div>
    <div>
        <label for="textEntry3">Text Entry 3:</label>
        <input type="text" id="textEntry3">
    </div>
    <div>
        <label for="textEntry4">Text Entry 4:</label>
        <input type="text" id="textEntry4">
    </div>
    <div>
        <label for="textEntry5">Text Entry 5:</label>
        <input type="text" id="textEntry5">
    </div>
    <div>
        <label for="textEntry6">Text Entry 6:</label>
        <input type="text" id="textEntry6">
    </div>
    <button id="downloadButton">Download YAML File</button>

    <!-- Add your JavaScript code here if needed -->
    <script>
        const dropdown1 = document.getElementById('dropdown1');
        const dropdown2 = document.getElementById('dropdown2');
        const typeDropdown1 = document.getElementById('type1');
        const typeDropdown2 = document.getElementById('type2');
        const subbDiv1 = document.querySelector('.subb');
        const subbDiv2 = document.querySelector('.subb2');
        const downloadButton = document.getElementById('downloadButton');

        function updateSubbVisibility() {
            // Show/hide the subbDiv1 based on the selected value of dropdown1
            subbDiv1.style.display = dropdown1.value === 'none' ? 'none' : 'block';

            // Show/hide the subbDiv2 based on the selected value of dropdown2
            subbDiv2.style.display = dropdown2.value === 'none' ? 'none' : 'block';

            // If dropdown1 is set to none and dropdown2 is not set to none, hide subbDiv1
            if (dropdown1.value === 'none' && dropdown2.value !== 'none') {
                subbDiv1.style.display = 'none';
            }
        }

        dropdown1.addEventListener('change', updateSubbVisibility);
        dropdown2.addEventListener('change', updateSubbVisibility);

        downloadButton.addEventListener('click', function () {
            // Get the selected values
            const selectedOptionValue1 = dropdown1.value;
            const selectedOptionValue2 = dropdown2.value;
            const selectedTypeValue1 = typeDropdown1.value;
            const selectedTypeValue2 = typeDropdown2.value;

            // Get text entry values
            const textEntry1 = document.getElementById('textEntry1').value;
            const textEntry2 = document.getElementById('textEntry2').value;
            const textEntry3 = document.getElementById('textEntry3').value;
            const textEntry4 = document.getElementById('textEntry4').value;
            const textEntry5 = document.getElementById('textEntry5').value;
            const textEntry6 = document.getElementById('textEntry6').value;

            // Create the YAML configuration string based on the selected type
            let yamlConfig = '';
            let additionalConfig = '';

            // Add text entry values to the YAML
            additionalConfig += `
textEntry1: ${textEntry1}
textEntry2: ${textEntry2}
textEntry3: ${textEntry3}
textEntry4: ${textEntry4}
textEntry5: ${textEntry5}
textEntry6: ${textEntry6}`;

            if (selectedTypeValue1 === '16 GPIO Rack Card 1') {
                additionalConfig += `
16 GPIO Rack Card 1:
  show text group
  ${selectedOptionValue1}`;
            }
            if (selectedTypeValue1 === '16 GPIO Rack Card 2') {
                additionalConfig += `
16 GPIO Rack Card 2:
  show text group
  ${selectedOptionValue1}`;
            }
            if (selectedTypeValue1 === '16 GPIO Rack Card 3') {
                additionalConfig += `
16 GPIO Rack Card 3:
  show text group
  ${selectedOptionValue1}`;
            }
            if (selectedTypeValue1 === '16 GPIO Rack Card 4') {
                additionalConfig += `
16 GPIO Rack Card 4:
  show text group
  ${selectedOptionValue1}`;
            }
            if (selectedTypeValue1 === 'Button Controller') {
                additionalConfig += `
Button Controller:
  show text group
  ${selectedOptionValue1}`;
            }       
            if (selectedTypeValue1 === '8 Port Relay Board 1') {
                additionalConfig += `                 
8 Port Relay Board 1:
  show text group
  ${selectedOptionValue1}`;
            }
            if (selectedTypeValue1 === '8 Port Relay Board 2') {
                additionalConfig += `
8 Port Relay Board 2:
  show text group
  ${selectedOptionValue1}`;
            }
            if (selectedTypeValue1 === '8 Port Relay Board 3') {
                additionalConfig += `
8 Port Relay Board 3:
  show text group
  ${selectedOptionValue1}`;
            }
            if (selectedTypeValue1 === '8 Port Relay Board 4') {
                additionalConfig += `
8 Port Relay Board 4:
  show text group
  ${selectedOptionValue1}`;
            }

            //asdfasdfasdfasadf/sdf
            if (selectedTypeValue2 === '16 GPIO Rack Card 1') {
                additionalConfig += `
16 GPIO Rack Card 1B:
  show text group
  ${selectedOptionValue2}`;
            }
            if (selectedTypeValue2 === '16 GPIO Rack Card 2') {
                additionalConfig += `
16 GPIO Rack Card 2B:
  show text group
  ${selectedOptionValue2}`;
            }
            if (selectedTypeValue2 === '16 GPIO Rack Card 3') {
                additionalConfig += `
16 GPIO Rack Card 3B:
  show text group
  ${selectedOptionValue2}`;
            }
            if (selectedTypeValue2 === '16 GPIO Rack Card 4') {
                additionalConfig += `
16 GPIO Rack Card 4B:
  show text group
  ${selectedOptionValue2}`;
            }
            if (selectedTypeValue2 === 'Button Controller') {
                additionalConfig += `
Button Controller B:
  show text group
  ${selectedOptionValue2}`;
            }       
            if (selectedTypeValue2 === '8 Port Relay Board 1') {
                additionalConfig += `                 
8 Port Relay Board 1B:
  show text group
  ${selectedOptionValue2}`;
            }
            if (selectedTypeValue2 === '8 Port Relay Board 2') {
                additionalConfig += `
8 Port Relay Board 2B:
  show text group
  ${selectedOptionValue2}`;
            }
            if (selectedTypeValue2 === '8 Port Relay Board 3') {
                additionalConfig += `
8 Port Relay Board 3B:
  show text group
  ${selectedOptionValue1}`;
            }
            if (selectedTypeValue2 === '8 Port Relay Board 4') {
                additionalConfig += `
8 Port Relay Board 4B:
  show text group
  ${selectedOptionValue1}`;
            }            
            // Combine the two configurations
            const combinedConfig = `${yamlConfig}\n${additionalConfig}`;
            let yamlConfig = `
esphome:
  name: ${textEntry1Value}
  on_boot:
       - delay: 1s
       - text_sensor.template.publish:
          id: last_name_pressed
          state: ""    
       - text_sensor.template.publish:
          id: last_state_pressed
          state: ""              
`;
            // Create a Blob and download link
            const blob = new Blob([combinedConfig], { type: 'text/plain' });
            const downloadLink = document.createElement('a');

            // Set attributes for the download link
            downloadLink.href = URL.createObjectURL(blob);
            downloadLink.download = 'rack_system_config.yaml';

            // Append the link to the body and simulate a click to trigger the download
            document.body.appendChild(downloadLink);
            downloadLink.click();

            // Remove the link from the body
            document.body.removeChild(downloadLink);
        });

        // Initial call to set the initial visibility based on the default values
        updateSubbVisibility();
    </script>
</body>

</html>