<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IHA Rack System Configuration Downloader</title>
    <style>
        /* Add your CSS styles here */
        .subb {
            margin-left: 2em; /* Adjust the value as needed */
        }
    </style>
</head>
<body>
    <header>
        <h1>IHA Rack System</h1>
    </header>

    <main>
        <label for="nodeDevice">Node Device 1 Address:</label>
        <select id="nodeDevice">
            <option value="none">Select Address</option>
            <option value="0x20">0x20</option>
            <option value="0x21">0x21</option>
            <option value="0x22">0x22</option>
            <option value="0x23">0x23</option>
            <option value="0x24">0x24</option>
            <option value="0x25">0x25</option>
            <option value="0x26">0x26</option>
            <option value="0x27">0x27</option>
            <!-- Add more options for Node Device 1 as needed -->
        </select>
    </main>
    
    <div class="subb">
        <label for="nodeType">Node Device Type:</label>
        <select id="nodeType">
            <option value="none">Select Type</option>
            <option value="16_gpio_rack_card_1">16 GPIO Rack Card 1</option>
            <option value="16_gpio_rack_card_2">16 GPIO Rack Card 2</option>
            <option value="16_gpio_rack_card_3">16 GPIO Rack Card 3</option>
            <option value="16_gpio_rack_card_4">16 GPIO Rack Card 4</option>
            <option value="button_controller">Button Controller</option>
            <option value="8_port_relay_board_1">8 Port Relay Board 1</option>
            <option value="8_port_relay_board_2">8 Port Relay Board 2</option>
            <option value="8_port_relay_board_3">8 Port Relay Board 3</option> 
            <option value="8_port_relay_board_4">8 Port Relay Board 4</option>
            <!-- Add more options for Node Device Type 1 as needed -->
        </select>
    </div>

    <button id="downloadButton">Download Configuration</button>

    <script>
        const dropdown = document.getElementById('nodeDevice');
        const typeDropdown = document.getElementById('nodeType');
        const downloadButton = document.getElementById('downloadButton');

        downloadButton.addEventListener('click', function() {
            const selectedOptionValue = dropdown.value;
            const selectedTypeValue = typeDropdown.value;
            
            const mcp23017Config = {
                id: 'mcp23017_hub_16_gpio_rack_card_1',
                address: selectedOptionValue
            };

            const configObject = {
                mcp23017: [mcp23017Config],
                type: selectedTypeValue
            };

            const textContent = JSON.stringify(configObject, null, 2);
            const blob = new Blob([textContent], { type: 'application/json' });

            const downloadLink = document.createElement('a');
            downloadLink.href = URL.createObjectURL(blob);
            downloadLink.download = 'node_device_info.json';

            downloadLink.click();
        });
    </script>

</body>
</html>
